{"version":3,"sources":["lib/theming/actions.ts","lib/theming/reducer.ts","lib/theming/themes/common.ts","lib/theming/themes/light.theme.ts","lib/theming/themes/dark.theme.ts","lib/theming/selectors.ts","lib/theming/theming-provider.tsx","lib/constants/index.ts","lib/websockets/index.ts","api/direct-chats.api.ts","features/directs/actions.ts","features/directs/reducer.ts","features/directs/selectors.ts","lib/fingerprint/index.ts","lib/http/index.ts","api/auth.api.ts","features/auth/actions.ts","features/auth/reducer.ts","features/auth/selectors.ts","lib/layout/index.ts","ui/atoms/icon.tsx","ui/atoms/heading.ts","ui/atoms/button.ts","ui/atoms/input.tsx","ui/atoms/text.ts","ui/atoms/circle.tsx","ui/atoms/loader.tsx","ui/templates/main-template.tsx","features/auth/templates/auth-template.tsx","features/auth/molecules/auth-toggle-button.tsx","features/auth/organisms/credentials-loader.tsx","lib/utils/index.ts","lib/dom/scroll.ts","lib/dom/visibility.ts","features/directs/organisms/direct-messages-list.tsx","lib/modal/index.tsx","features/directs/organisms/direct-attachments-modal.tsx","api/group-chats.api.ts","features/groups/actions.ts","features/groups/reducer.ts","features/groups/selectors.ts","features/groups/organisms/group-messages-list.tsx","api/users.api.ts","features/users/actions.ts","features/users/selectors.ts","features/users/reducer.ts","ui/molecules/avatar.tsx","ui/molecules/progress-bar.tsx","features/chats/lib/formatting.ts","features/chats/organisms/chats-list.tsx","features/directs/lib/map-direct-to-chat.ts","features/groups/lib/map-group-to-chat.ts","lib/formatting/index.ts","features/chats/organisms/message.tsx","api/upload.api.ts","lib/media-recorder/index.ts","features/chats/organisms/chat-form.tsx","features/chats/organisms/chat-events-listeners.tsx","features/chats/organisms/chat-creation-modal.tsx","features/chats/lib/fetching.ts","features/chats/actions.ts","features/chats/reducer.ts","features/chats/selectors.ts","lib/store/root-reducer.ts","lib/store/store.ts","lib/routing/index.tsx","pages/login/index.tsx","pages/register/index.tsx","lib/regex/index.ts","pages/home/index.tsx","pages/direct/index.tsx","pages/group/index.tsx","pages/routes.tsx","global-styles.ts","app.tsx","index.tsx"],"names":["type","toggleTheme","createAction","changeTheme","reducer","createReducer","theme","actions","state","payload","fontFamily","commonTheme","breakpoints","xs","sm","md","lg","xl","direction","typography","htmlFontSize","fontSize","fontWeight","light","regular","medium","bold","h1","lineHeight","letterSpacing","h2","h3","h4","h5","h6","lightTheme","palette","primary","main","dark","secondary","error","warning","info","success","divider","text","background","paper","default","action","hover","disabled","focus","icon","active","darkTheme","theming","stateSelector","ThemingProvider","children","useSelector","selectors","BACKEND_URL","socket","io","withCredentials","directChatsApi","Promise","resolve","emit","data","fetchChats","createAsyncThunk","a","fetchChat","partner","fetchMessages","skip","fetchSendingMessage","args","fetchReadingMessage","fetchAudios","fetchImages","fetchFiles","setScroll","addMessage","updateMessage","readMessage","setNumberOfUnreadMessages","addChat","chats","list","areChatsFetching","pending","fulfilled","rejected","arg","meta","chat","partnerId","isFetching","areMessagesFetching","areMessagesFetched","areMessagesLeftToFetch","messages","length","areAudiosFetching","audios","areImagesFetching","images","areFilesFetching","files","message","map","id","numberOfUnreadMessages","isOwn","lastMessage","scroll","messageId","partial","idx","findIndex","index","isRead","number","directsState","directs","isChatFetching","options","excludes","plugins","localStorage","adBlock","screenResolution","availableScreenResolution","enumerateDevices","pixelRatio","doNotTrack","preprocessor","key","value","UAParser","getOS","getBrowser","getEngine","name","getFingerprint","reject","requestIdleCallback","Fingerprint","getPromise","components","fingerprint","x64hash128","join","request","axios","create","baseURL","CODES","UNAUTHORIZED","SUCCESSFUL","useInterceptor","interceptor","interceptors","response","use","config","includes","status","eject","authApi","refreshTokens","login","url","method","register","getCredentials","fetchLogin","fetchRegister","fetchCredentials","credentials","isAuthenticated","areCredentialsFetching","isRegisterFetching","isLoginFetching","auth","prop","mixins","props","css","width","height","justify","align","basis","grow","wrap","shrink","order","padding","Row","styled","div","reverse","gap","Col","Icon","SVG","viewBox","xmlSpace","d","cx","cy","r","svg","pointer","H1","H2","H3","H4","H5","Button","button","small","danger","pure","Input","forwardRef","ref","label","Wrapper","Label","htmlFor","InputNative","ErrorLabel","attrs","input","transparent","invisible","span","Text","clickable","ellipsis","Circle","Loader","spin","keyframes","MainTemplate","header","footer","Template","Header","AuthTemplate","FormBlock","Representation","Presentation","AuthToggleButton","to","history","useHistory","ToggleButton","onClick","push","CredentialsLoader","dispatch","useRootDispatch","useEffect","isEmpty","undefined","scrollToBottom","element","scrollTop","scrollHeight","clientHeight","isAtTop","isAtBottom","INFINITE_SCROLL","isElementVisible","rect","getBoundingClientRect","viewHeight","Math","max","document","documentElement","window","innerHeight","bottom","top","DirectMessagesList","areFetching","useState","isScrolled","setIsScrolled","useParams","listRef","useRef","authSelectors","last","current","handleReadingMessages","sender","reversed","unread","find","dataset","slice","indexOf","filter","List","onScroll","currentTarget","audio","isSystem","createdAt","avatar","date","Date","useModal","isModalOpen","setIsOpen","openModal","closeModal","Modal","ModalBackground","DirectAttachmentsModal","tab","useTab","sortedImages","sort","b","sortedFiles","sortedAudios","Content","src","alt","file","size","href","target","rel","prettyBytes","controls","groupChatsApi","groupId","groupsSelector","groups","GroupMessagesList","group","usersApi","params","fetchSearchingUsers","searched","users","usersState","areSearchingFetching","Avatar","Image","img","ProgressBar","progress","Bar","formatMessageDate","scheme","ceil","now","format","ChatsList","directsSelectors","groupsSelectors","areDirectsFetching","areGroupsFetching","searching","chatsSelectors","search","usersSelectors","direct","username","unreadMessages","link","mapDirectToChat","prefix","title","mapGroupToChat","filteredSearched","toLowerCase","startsWith","SearchList","ListItem","DateText","UnreadMessages","Message","formatDuration","duration","normalize","time","intervalToDuration","start","end","hours","minutes","seconds","hoursOutput","String","audioSrc","audioRef","messageRef","isPaused","isStarted","setAudio","handleImageLoad","parent","parentElement","data-id","data-is-read","data-is-own","Block","Bubble","onLoad","play","pause","onEnded","onDurationChange","Infinity","currentTime","onTimeUpdate","SystemMessage","data-is-system","uploadApi","formData","FormData","append","stopMediaStream","mediaStream","getTracks","forEach","track","stop","removeTrack","stopAndRemoveTrack","ChatForm","handleSubmit","form","setForm","isRecording","isUploading","mediaRecorder","attachments","image","clearInputs","handleFormSubmit","event","preventDefault","attachedImages","attachedFiles","areFilesAttached","Form","onSubmit","FormPanel","onChange","nanoid","onUploadProgress","loaded","total","then","catch","accept","placeholder","navigator","mediaDevices","getUserMedia","stream","MediaRecorder","durationInterval","isCancelled","onstart","setInterval","onstop","clearInterval","onpause","ondataavailable","mp3","Blob","finally","remove","removeImage","removeFile","AttachedImage","ChatEventsListeners","on","directsActions","groupsActions","ChatCreationModal","Answer","useFetchingChats","toFetchDirects","toFetchGroups","unwrapResult","setSearching","chatsState","rootReducer","combineReducers","themingReducer","authReducer","directsReducer","groupsReducer","chatsReducer","usersReducer","store","configureStore","useDispatch","PrivateRoute","PublicOnlyRoute","LoginPage","schema","yup","shape","required","password","LoginForm","useForm","resolver","yupResolver","mode","defaultValues","formState","errors","isValid","authActions","RegisterPage","matches","min","RegisterForm","HomePage","directChats","areDirectChatsFetching","groupChats","areGroupChatsFetching","toFetchDirectChats","toFetchGroupChats","SidebarWrapper","Sidebar","ListPanelWrapper","ChatPanelWrapper","SearchBar","chatsActions","usersActions","query","aside","DirectPage","toFetchMessages","toFetchChat","DirectChat","lastSeen","isBanned","isEdited","toString","GroupPage","GroupChat","numberOfMembers","member","Routes","component","path","exact","GlobalStyles","createGlobalStyle","App","root","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.1c6930f6.chunk.js","sourcesContent":["import {createAction} from \"@reduxjs/toolkit\";\r\n\r\nconst type = \"theming\";\r\n\r\nexport const toggleTheme = createAction(`${type}/toggleTheme`);\r\n\r\nexport const changeTheme = createAction(`${type}/changeTheme`);","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nimport * as actions from \"./actions\";\r\n\r\ntype Theme = \"light\" | \"dark\";\r\n\r\ninterface ThemingState {\r\n    theme: Theme;\r\n}\r\n\r\nexport const reducer = createReducer<ThemingState>(\r\n    {\r\n        theme: \"dark\"\r\n    },\r\n    {\r\n        [actions.toggleTheme.type]: (state) => {\r\n            state.theme = state.theme === \"dark\" ? \"light\" : \"dark\";\r\n        },\r\n        [actions.changeTheme.type]: (state, {payload}: PayloadAction<{theme: Theme}>) => {\r\n            state.theme = payload.theme;\r\n        }\r\n    }\r\n);","const fontFamily = \"\\\"Jetbrains Mono\\\", sans-serif\";\r\n\r\nexport const commonTheme = {\r\n    breakpoints: {\r\n        xs: \"0px\",\r\n        sm: \"600px\",\r\n        md: \"960px\",\r\n        lg: \"1280px\",\r\n        xl: \"1920px\"\r\n    },\r\n    direction: \"ltr\",\r\n    typography: {\r\n        htmlFontSize: \"62.5%\",\r\n        fontFamily: fontFamily,\r\n        fontSize: \"1.6rem\",\r\n        fontWeight: {\r\n            light: 300,\r\n            regular: 400,\r\n            medium: 600,\r\n            bold: 700\r\n        },\r\n        h1: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 600,\r\n            fontSize: \"6rem\",\r\n            lineHeight: 1.167,\r\n            letterSpacing: \"-0.01562em\"\r\n        },\r\n        h2: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 600,\r\n            fontSize: \"3.75rem\",\r\n            lineHeight: 1.2,\r\n            letterSpacing: \"-0.00833em\"\r\n        },\r\n        h3: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 600,\r\n            fontSize: \"3rem\",\r\n            lineHeight: 1.167,\r\n            letterSpacing: \"0em\"\r\n        },\r\n        h4: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 500,\r\n            fontSize: \"2.125rem\",\r\n            lineHeight: 1.235,\r\n            letterSpacing: \"0.00735em\"\r\n        },\r\n        h5: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 500,\r\n            fontSize: \"1.5rem\",\r\n            lineHeight: 1.334,\r\n            letterSpacing: \"0em\"\r\n        },\r\n        h6: {\r\n            fontFamily: fontFamily,\r\n            fontWeight: 500,\r\n            fontSize: \"1.25rem\",\r\n            lineHeight: 1.6,\r\n            letterSpacing: \"0.0075em\"\r\n        }\r\n    }\r\n};","import {DefaultTheme} from \"styled-components\";\r\n\r\nimport {commonTheme} from \"./common\";\r\n\r\nexport const lightTheme: DefaultTheme = {\r\n    ...commonTheme,\r\n    palette: {\r\n        primary: {\r\n            light: \"\",\r\n            main: \"#2F334D\",\r\n            dark: \"#292C43\"\r\n        },\r\n        secondary: {\r\n            light: \"\",\r\n            main: \"#476EEF\",\r\n            dark: \"\"\r\n        },\r\n        error: {\r\n            light: \"\",\r\n            main: \"#D84040\",\r\n            dark: \"\"\r\n        },\r\n        warning: {\r\n            light: \"#F84469\",\r\n            main: \"\",\r\n            dark: \"\"\r\n        },\r\n        info: {\r\n            light: \"\",\r\n            main: \"\",\r\n            dark: \"\"\r\n        },\r\n        success: {\r\n            light: \"\",\r\n            main: \"#4BB34B\",\r\n            dark: \"\"\r\n        },\r\n        divider: \"#2D314B\",\r\n        text: {\r\n            primary: \"#FEFEFE\",\r\n            secondary: \"#52566E\"\r\n        },\r\n        background: {\r\n            paper: \"#E9E9E9\",\r\n            default: \"#F0F0F0\"\r\n        },\r\n        action: {\r\n            hover: \"rgba(0, 0, 0, 0.04)\",\r\n            disabled: \"rgba(0, 0, 0, 0.26)\",\r\n            focus: \"rgba(0, 0, 0, 0.12)\",\r\n        },\r\n        icon: {\r\n            active: \"\",\r\n            main: \"\"\r\n        }\r\n    }\r\n};","import {DefaultTheme} from \"styled-components\";\r\n\r\nimport {commonTheme} from \"./common\";\r\n\r\nexport const darkTheme: DefaultTheme = {\r\n    ...commonTheme,\r\n    palette: {\r\n        primary: {\r\n            light: \"#25294A\",\r\n            main: \"#202442\",\r\n            dark: \"#292C43\"\r\n        },\r\n        secondary: {\r\n            light: \"#406AE0\",\r\n            main: \"\",\r\n            dark: \"\"\r\n        },\r\n        error: {\r\n            light: \"\",\r\n            main: \"#F44336\",\r\n            dark: \"\"\r\n        },\r\n        warning: {\r\n            light: \"\",\r\n            main: \"#F65164\",\r\n            dark: \"\"\r\n        },\r\n        info: {\r\n            light: \"\",\r\n            main: \"\",\r\n            dark: \"\"\r\n        },\r\n        icon: {\r\n            active: \"#F3F6FD\",\r\n            main: \"#514A7B\"\r\n        },\r\n        success: {\r\n            light: \"\",\r\n            main: \"\",\r\n            dark: \"\"\r\n        },\r\n        text: {\r\n            primary: \"#FAFAFA\",\r\n            secondary: \"#4A4E6B\"\r\n        },\r\n        background: {\r\n            paper: \"#303030\",\r\n            default: \"#212121\"\r\n        },\r\n        action: {\r\n            hover: \"rgba(0, 0, 0, 0.04)\",\r\n            disabled: \"rgba(0, 0, 0, 0.26)\",\r\n            focus: \"rgba(0, 0, 0, 0.12)\"\r\n        },\r\n        divider: \"#2B2F4E\"\r\n    }\r\n};","import {RootState} from \"@lib/typings\";\r\n\r\nconst stateSelector = (state: RootState) => state.theming;\r\n\r\nexport const theme = (state: RootState) => stateSelector(state).theme;","import React from \"react\";\r\nimport {ThemeProvider} from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {darkTheme, lightTheme} from \"./themes\";\r\nimport * as selectors from \"./selectors\";\r\n\r\nexport const ThemingProvider: React.FC = ({children}) => {\r\n    const theme = useSelector(selectors.theme);\r\n\r\n    return (\r\n        <ThemeProvider theme={theme === \"dark\" ? darkTheme : lightTheme}>\r\n            {children}\r\n        </ThemeProvider>\r\n    );\r\n};","export const BACKEND_URL = \"157.230.97.249\";","import {io} from \"socket.io-client\";\r\n\r\nimport {BACKEND_URL} from \"@lib/constants\";\r\n\r\nexport const socket = io(BACKEND_URL, {\r\n  withCredentials: true\r\n});","import {DirectChatsListItem, DirectChat, DirectChatMessage, DirectChatDetails} from \"@features/directs\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {socket} from \"@lib/websockets\";\r\nimport {AttachedImage, AttachedFile, AttachedAudio} from \"@features/chats\";\r\n\r\nexport interface GetChatsResponse {\r\n  chats: DirectChatsListItem[];\r\n}\r\n\r\nconst getChats = (): Promise<{data: GetChatsResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:GET_CHATS\", null, (data: GetChatsResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetChatData {\r\n  partner: ID;\r\n}\r\n\r\nexport interface GetChatResponse {\r\n  chat: DirectChat;\r\n}\r\n\r\nconst getChat = (data: GetChatData): Promise<{data: GetChatResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:GET_CHAT\", data, (data: GetChatResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetChatMessagesData {\r\n  partner: ID;\r\n  skip?: number;\r\n}\r\n\r\nexport interface GetChatMessagesResponse {\r\n  messages: DirectChatMessage[];\r\n}\r\n\r\nconst getMessages = (data: GetChatMessagesData): Promise<{data: GetChatMessagesResponse}> =>\r\n  new Promise((resolve) => {\r\n    socket.emit(\"DIRECT_CHAT:GET_MESSAGES\", data, (data: GetChatMessagesResponse) => resolve({data}));\r\n  });\r\n\r\nexport interface SendMessageData {\r\n  text?: string | null;\r\n  audio?: ID | null;\r\n  images?: ID[] | null;\r\n  files?: ID[] | null;\r\n  parent?: ID | null;\r\n  partner: ID;\r\n}\r\n\r\nexport interface SendMessageResponse {\r\n  message: DirectChatMessage;\r\n}\r\n\r\nconst sendMessage = (data: SendMessageData): Promise<{data: SendMessageResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:CREATE_MESSAGE\", data, (data: SendMessageResponse) => resolve({data}));\r\n});\r\n\r\nexport interface ReadMessageData {\r\n  partner: ID;\r\n  message: ID;\r\n}\r\n\r\nexport interface ReadMessageResponse {\r\n  message: DirectChatMessage;\r\n  chat: DirectChatDetails;\r\n}\r\n\r\nconst readMessage = (data: ReadMessageData): Promise<{data: ReadMessageResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:READ_MESSAGE\", data, (data: ReadMessageResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetAudiosData {\r\n  partner: ID;\r\n}\r\n\r\nexport interface GetAudiosResponse {\r\n  audios: AttachedAudio[];\r\n}\r\n\r\nconst getAudios = (data: GetAudiosData): Promise<{data: GetAudiosResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:GET_AUDIOS\", data, (data: GetAudiosResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetImagesData {\r\n  partner: ID;\r\n}\r\n\r\nexport interface GetImagesResponse {\r\n  images: AttachedImage[];\r\n}\r\n\r\nconst getImages = (data: GetImagesData): Promise<{data: GetImagesResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:GET_IMAGES\", data, (data: GetImagesResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetFilesData {\r\n  partner: ID;\r\n}\r\n\r\nexport interface GetFilesResponse {\r\n  files: AttachedFile[];\r\n}\r\n\r\nconst getFiles = (data: GetFilesData): Promise<{data: GetFilesResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"DIRECT_CHAT:GET_FILES\", data, (data: GetFilesResponse) => resolve({data}));\r\n});\r\n\r\nexport const directChatsApi = {\r\n  getChats, getChat, getMessages,\r\n  sendMessage, readMessage, getAudios,\r\n  getImages, getFiles\r\n};","import {createAction, createAsyncThunk} from \"@reduxjs/toolkit\";\r\n\r\nimport {\r\n  directChatsApi,\r\n  GetChatData,\r\n  GetChatMessagesData,\r\n  GetChatMessagesResponse,\r\n  GetChatResponse,\r\n  GetChatsResponse,\r\n  ReadMessageData,\r\n  ReadMessageResponse,\r\n  SendMessageData,\r\n  SendMessageResponse,\r\n  GetAudiosResponse,\r\n  GetAudiosData, GetImagesData, GetImagesResponse, GetFilesData, GetFilesResponse\r\n} from \"@api/direct-chats.api\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {DirectChat, DirectChatMessage, DirectChatPartner} from \"./lib/typings\";\r\nimport {User} from \"@features/users\";\r\n\r\nconst type = \"directs\";\r\n\r\nexport interface FetchChatsPayload extends GetChatsResponse {\r\n}\r\n\r\nexport const fetchChats = createAsyncThunk<FetchChatsPayload, void>(`${type}/fetchChats`, async () => {\r\n  const {data} = await directChatsApi.getChats();\r\n\r\n  return data;\r\n});\r\n\r\nexport interface FetchChatPayload extends GetChatResponse {\r\n}\r\n\r\nexport interface FetchChatData extends GetChatData {\r\n  partnerId: ID;\r\n}\r\n\r\nexport const fetchChat = createAsyncThunk<FetchChatPayload, FetchChatData>(`${type}/fetchChat`,\r\n  async ({partner}) => {\r\n    const {data} = await directChatsApi.getChat({partner});\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchMessagesPayload extends GetChatMessagesResponse {\r\n}\r\n\r\nexport interface FetchMessagesData extends GetChatMessagesData {\r\n  partnerId: ID;\r\n}\r\n\r\nexport const fetchMessages = createAsyncThunk<FetchMessagesPayload, FetchMessagesData>(`${type}/fetchMessages`,\r\n  async ({skip, partner}) => {\r\n    const {data} = await directChatsApi.getMessages({skip, partner});\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchSendingMessagePayload extends SendMessageResponse {\r\n}\r\n\r\nexport interface FetchSendingMessageData extends SendMessageData {\r\n}\r\n\r\nexport const fetchSendingMessage = createAsyncThunk<FetchSendingMessagePayload, FetchSendingMessageData>(`${type}/fetchSendingMessage`,\r\n  async (args) => {\r\n    const {data} = await directChatsApi.sendMessage(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchReadingMessageData extends ReadMessageData {\r\n}\r\n\r\nexport interface FetchReadingMessagePayload extends ReadMessageResponse {\r\n}\r\n\r\nexport const fetchReadingMessage = createAsyncThunk<FetchReadingMessagePayload, FetchReadingMessageData>(`${type}/fetchReadingMessage`,\r\n  async (args) => {\r\n    const {data} = await directChatsApi.readMessage(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchAudiosData extends GetAudiosData {\r\n  partnerId: ID;\r\n}\r\n\r\nexport interface FetchAudiosPayload extends GetAudiosResponse {\r\n}\r\n\r\nexport const fetchAudios = createAsyncThunk<FetchAudiosPayload, FetchAudiosData>(`${type}/fetchAudios`,\r\n  async (args) => {\r\n    const {data} = await directChatsApi.getAudios(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchImagesData extends GetImagesData {\r\n  partnerId: ID;\r\n}\r\n\r\nexport interface FetchImagesPayload extends GetImagesResponse {\r\n}\r\n\r\nexport const fetchImages = createAsyncThunk<FetchImagesPayload, FetchImagesData>(`${type}/fetchImages`,\r\n  async (args) => {\r\n    const {data} = await directChatsApi.getImages(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface FetchFilesData extends GetFilesData {\r\n  partnerId: ID;\r\n}\r\n\r\nexport interface FetchFilesPayload extends GetFilesResponse {\r\n}\r\n\r\nexport const fetchFiles = createAsyncThunk<FetchFilesPayload, FetchFilesData>(`${type}/fetchFiles`,\r\n  async (args) => {\r\n    const {data} = await directChatsApi.getFiles(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface SetScrollPayload {\r\n  partnerId: ID;\r\n  scroll: number;\r\n}\r\n\r\nexport const setScroll = createAction<SetScrollPayload>(`${type}/setScroll`);\r\n\r\nexport interface AddMessagePayload {\r\n  partnerId: ID;\r\n  message: DirectChatMessage;\r\n  isOwn: boolean;\r\n}\r\n\r\nexport const addMessage = createAction<AddMessagePayload>(`${type}/addMessage`);\r\n\r\nexport interface UpdateMessagePayload {\r\n  partnerId: ID;\r\n  messageId: ID;\r\n  partial: Partial<DirectChatMessage>;\r\n}\r\n\r\nexport const updateMessage = createAction<UpdateMessagePayload>(`${type}/updateMessage`);\r\n\r\nexport interface ReadMessagePayload {\r\n  partnerId: ID;\r\n  messageId: ID;\r\n}\r\n\r\nexport const readMessage = createAction<ReadMessagePayload>(`${type}/readMessage`);\r\n\r\nexport interface SetNumberOfUnreadMessagesPayload {\r\n  partnerId: ID;\r\n  number: number;\r\n}\r\n\r\nexport const setNumberOfUnreadMessages = createAction<SetNumberOfUnreadMessagesPayload>(`${type}/setNumberOfUnreadMessages`);\r\n\r\nexport interface AddChatPayload {\r\n  partnerId: ID;\r\n  chat: DirectChat;\r\n}\r\n\r\nexport const addChat = createAction<AddChatPayload>(`${type}/addChat`);","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\n\nimport {AttachedAudio, AttachedImage, AttachedFile} from \"@features/chats\";\nimport {DirectChatMessage, DirectChat, DirectChatsListItem} from \"./lib/typings\";\nimport {\n  AddChatPayload,\n  AddMessagePayload,\n  FetchAudiosData,\n  FetchAudiosPayload,\n  FetchChatData,\n  FetchChatPayload,\n  FetchChatsPayload, FetchFilesData, FetchFilesPayload, FetchImagesData,\n  FetchImagesPayload,\n  FetchMessagesData,\n  FetchMessagesPayload,\n  ReadMessagePayload,\n  SetNumberOfUnreadMessagesPayload,\n  SetScrollPayload,\n  UpdateMessagePayload\n} from \"./actions\";\nimport * as actions from \"./actions\";\n\ninterface DirectsState {\n  list: DirectChatsListItem[] | null;\n  areChatsFetching: boolean;\n  chats: {\n    [key: string]: {\n      chat: DirectChat | null;\n      messages: DirectChatMessage[];\n      isFetching: boolean;\n      areMessagesFetching: boolean;\n      areMessagesFetched: boolean;\n      areMessagesLeftToFetch: boolean;\n      images: AttachedImage[];\n      areImagesFetching: boolean;\n      files: AttachedFile[];\n      areFilesFetching: boolean;\n      audios: AttachedAudio[];\n      areAudiosFetching: boolean;\n      scroll: number;\n    };\n  };\n}\n\nexport const reducer = createReducer<DirectsState>({\n  chats: {},\n  list: null,\n  areChatsFetching: false\n}, {\n  [actions.fetchChats.pending.type]: (state) => {\n    state.areChatsFetching = true;\n  },\n\n  [actions.fetchChats.fulfilled.type]: (state, {payload}: PayloadAction<FetchChatsPayload>) => {\n    state.list = payload.chats;\n    state.areChatsFetching = false;\n  },\n\n  [actions.fetchChats.rejected.type]: (state) => {\n    state.areChatsFetching = false;\n  },\n\n  [actions.fetchChat.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, isFetching: true\n    };\n  },\n\n  [actions.fetchChat.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchChatPayload, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat,\n      chat: payload.chat,\n      isFetching: false\n    };\n  },\n\n  [actions.fetchChat.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, isFetching: false\n    };\n  },\n\n  [actions.fetchMessages.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areMessagesFetching: true\n    };\n  },\n\n  [actions.fetchMessages.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchMessagesPayload, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat,\n      areMessagesFetching: false,\n      areMessagesFetched: true,\n      areMessagesLeftToFetch: !!payload.messages.length,\n      messages: chat.messages ? [...payload.messages, ...chat.messages]\n        : payload.messages\n    };\n  },\n\n  [actions.fetchMessages.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areMessagesFetching: false\n    };\n  },\n\n  [actions.fetchAudios.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchAudiosData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areAudiosFetching: true\n    };\n  },\n\n  [actions.fetchAudios.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchAudiosPayload, string, {arg: FetchAudiosData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat,\n      audios: payload.audios,\n      areAudiosFetching: false\n    };\n  },\n\n  [actions.fetchAudios.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchAudiosData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areAudiosFetching: false\n    };\n  },\n\n  [actions.fetchImages.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchImagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areImagesFetching: true\n    };\n  },\n\n  [actions.fetchImages.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchImagesPayload, string, {arg: FetchImagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat,\n      images: payload.images,\n      areImagesFetching: false\n    };\n  },\n\n  [actions.fetchImages.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchImagesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areImagesFetching: false\n    };\n  },\n\n  [actions.fetchFiles.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchFilesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areFilesFetching: true\n    };\n  },\n\n  [actions.fetchFiles.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchFilesPayload, string, {arg: FetchFilesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat,\n      files: payload.files,\n      areFilesFetching: false\n    };\n  },\n\n  [actions.fetchFiles.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchFilesData}>) => {\n    const chat = state.chats[arg.partnerId] || {};\n\n    state.chats[arg.partnerId] = {\n      ...chat, areFilesFetching: false\n    };\n  },\n\n  [actions.addMessage.type]: (state, {payload}: PayloadAction<AddMessagePayload>) => {\n    const chat = state.chats[payload.partnerId] || {};\n\n    state.chats[payload.partnerId] = {\n      ...chat,\n      messages: chat.messages ? [...chat.messages, payload.message] : [payload.message]\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.partner.id === payload.partnerId;\n\n      if (isCurrent) {\n        const numberOfUnreadMessages = payload.isOwn ? chat.numberOfUnreadMessages :\n          (chat.numberOfUnreadMessages ? chat.numberOfUnreadMessages + 1 : 1);\n\n        return {\n          ...chat,\n          lastMessage: payload.message,\n          numberOfUnreadMessages\n        };\n      }\n\n      return chat;\n    });\n  },\n\n  [actions.setScroll.type]: (state, {payload}: PayloadAction<SetScrollPayload>) => {\n    const chat = state.chats[payload.partnerId] || {};\n\n    state.chats[payload.partnerId] = {\n      ...chat, scroll: payload.scroll\n    };\n  },\n\n  [actions.updateMessage.type]: (state, {payload}: PayloadAction<UpdateMessagePayload>) => {\n    const chat = state.chats[payload.partnerId] || {};\n\n    state.chats[payload.partnerId] = {\n      ...chat, messages: chat.messages &&\n        chat.messages.map((message) => message.id === payload.messageId ?\n          ({...message, ...payload.partial}) : message)\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.partner.id === payload.partnerId &&\n        (chat.lastMessage && chat.lastMessage.id) === payload.messageId;\n\n      if (isCurrent) return {\n        ...chat,\n        lastMessage: {\n          ...chat.lastMessage!,\n          ...payload.partial\n        }\n      };\n\n      return chat;\n    });\n  },\n\n  [actions.readMessage.type]: (state, {payload}: PayloadAction<ReadMessagePayload>) => {\n    const chat = state.chats[payload.partnerId] || {};\n\n    const idx = chat.messages && chat.messages\n      .findIndex((message) => message.id === payload.messageId);\n\n    state.chats[payload.partnerId] = {\n      ...chat,\n      messages: chat.messages && chat.messages\n        .map((message, index) => idx >= index ? ({...message, isRead: true}) : message)\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.partner.id === payload.partnerId &&\n        (chat.lastMessage && chat.lastMessage.id) === payload.messageId;\n\n      if (isCurrent) return ({\n        ...chat, lastMessage: {\n          ...chat.lastMessage!, isRead: true\n        }\n      });\n\n      return chat;\n    });\n  },\n\n  [actions.setNumberOfUnreadMessages.type]: (state, {payload}: PayloadAction<SetNumberOfUnreadMessagesPayload>) => {\n    state.list = state.list && state.list\n      .map((chat) => chat.partner.id === payload.partnerId ?\n        ({...chat, numberOfUnreadMessages: payload.number}) : chat);\n  },\n\n  [actions.addChat.type]: (state, {payload}: PayloadAction<AddChatPayload>) => {\n    const chat = state.chats[payload.partnerId] || {};\n\n    state.chats[payload.partnerId] = {\n      ...chat, ...payload.chat\n    };\n  }\n});","import {ID, RootState} from \"@lib/typings\";\r\n\r\nconst directsState = (state: RootState) => state.directs;\r\n\r\nexport const chats = (state: RootState) => directsState(state).list;\r\n\r\nexport const areChatsFetching = (state: RootState) => directsState(state).areChatsFetching;\r\n\r\nexport const chat = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.chat || null;\r\n};\r\n\r\nexport const isChatFetching = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return !!chat && (chat.isFetching || false);\r\n};\r\n\r\nexport const messages = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.messages || null;\r\n};\r\n\r\nexport const areMessagesFetching = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.areMessagesFetching || false;\r\n};\r\n\r\nexport const areMessagesFetched = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.areMessagesFetched || false;\r\n};\r\n\r\nexport const scroll = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.scroll || null;\r\n};\r\n\r\nexport const areMessagesLeftToFetch = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return !chat?.areMessagesLeftToFetch;\r\n};\r\n\r\nexport const images = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.images || [];\r\n};\r\n\r\nexport const areImagesFetching = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.areImagesFetching || false;\r\n};\r\n\r\nexport const files = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.files || [];\r\n};\r\n\r\nexport const areFilesFetching = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.areFilesFetching || false;\r\n};\r\n\r\nexport const audios = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.audios || [];\r\n};\r\n\r\nexport const areAudiosFetching = (partnerId: ID) => (state: RootState) => {\r\n  const chat = directsState(state).chats[partnerId];\r\n\r\n  return chat?.areAudiosFetching || false;\r\n};","import Fingerprint from \"fingerprintjs2\";\r\nimport UAParser from \"ua-parser-js\";\r\n\r\nconst options: Fingerprint.Options = {\r\n    excludes: {\r\n        plugins: true,\r\n        localStorage: true,\r\n        adBlock: true,\r\n        screenResolution: true,\r\n        availableScreenResolution: true,\r\n        enumerateDevices: true,\r\n        pixelRatio: true,\r\n        doNotTrack: true\r\n    },\r\n    preprocessor: (key, value) => {\r\n        if (key === \"userAgent\") {\r\n            const {getOS, getBrowser, getEngine} = new UAParser(value);\r\n\r\n            return `${getOS().name} :: ${getBrowser().name} :: ${getEngine().name}`;\r\n        }\r\n\r\n        return value\r\n    }\r\n};\r\n\r\nexport const getFingerprint = (): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n        const hash = async () => {\r\n            try {\r\n                const components = await Fingerprint.getPromise(options);\r\n\r\n                const fingerprint = Fingerprint.x64hash128(components.map(({value}) => value).join(\"\"), 31);\r\n\r\n                resolve(fingerprint);\r\n            } catch (error) {\r\n                reject(error);\r\n            }\r\n        };\r\n\r\n        return requestIdleCallback(hash);\r\n    });\r\n};","import axios, {AxiosError, AxiosPromise} from \"axios\";\r\n\r\nimport {BACKEND_URL} from \"@lib/constants\";\r\nimport {authApi} from \"@api/auth.api\";\r\nimport {getFingerprint} from \"@lib/fingerprint\";\r\n\r\nexport const request = axios.create({\r\n  baseURL: BACKEND_URL,\r\n  withCredentials: true\r\n});\r\n\r\nexport const CODES = {\r\n  UNAUTHORIZED: [401, 403],\r\n  SUCCESSFUL: [204, 201, 200]\r\n};\r\n\r\nuseAuthInterceptor();\r\n\r\nfunction useAuthInterceptor() {\r\n  useInterceptor();\r\n\r\n  function useInterceptor() {\r\n    const interceptor = request.interceptors.response.use(\r\n      (response) => response,\r\n      async (error: AxiosError): Promise<AxiosPromise | void> => {\r\n        const {config, response} = error;\r\n\r\n        const isError = !response || !CODES.UNAUTHORIZED.includes(response.status);\r\n\r\n        if (isError) return Promise.reject(error);\r\n\r\n        request.interceptors.response.eject(interceptor);\r\n\r\n        try {\r\n          const fingerprint = await getFingerprint();\r\n\r\n          const {status} = await authApi.refreshTokens({fingerprint});\r\n\r\n          const isSuccessful = CODES.SUCCESSFUL.includes(status);\r\n\r\n          if (isSuccessful) return request(config);\r\n        } catch (error) {\r\n          return Promise.reject(error);\r\n        } finally {\r\n          useInterceptor();\r\n        }\r\n      }\r\n    );\r\n  }\r\n}\r\n","import {AxiosPromise} from \"axios\";\r\n\r\nimport {Credentials} from \"@features/auth\";\r\nimport {request} from \"@lib/http\";\r\n\r\nexport interface LoginData {\r\n    username: string;\r\n    password: string;\r\n    fingerprint: string;\r\n}\r\n\r\nexport interface LoginResponse {\r\n    credentials: Credentials;\r\n}\r\n\r\nconst login = (data: LoginData): AxiosPromise<LoginResponse> => request({\r\n    url: \"/v1/api/auth/login\",\r\n    method: \"POST\", data\r\n});\r\n\r\nexport interface RegisterData {\r\n    username: string;\r\n    password: string;\r\n    fingerprint: string;\r\n}\r\n\r\nexport interface RegisterResponse {\r\n    credentials: Credentials;\r\n}\r\n\r\nconst register = (data: RegisterData): AxiosPromise<RegisterResponse> => request({\r\n    url: \"/v1/api/auth/register\",\r\n    method: \"POST\", data\r\n});\r\n\r\nexport interface GetCredentialsResponse {\r\n    credentials: Credentials;\r\n}\r\n\r\nconst getCredentials = (): AxiosPromise<GetCredentialsResponse> => request({\r\n    url: \"/v1/api/auth/credentials\",\r\n    method: \"GET\"\r\n});\r\n\r\ninterface RefreshTokensData {\r\n    fingerprint: string;\r\n}\r\n\r\nconst refreshTokens = (data: RefreshTokensData): AxiosPromise<void> => request({\r\n    url: \"/v1/api/auth/refresh-tokens\",\r\n    method: \"POST\", data\r\n});\r\n\r\nexport const authApi = {\r\n    login, register, getCredentials,\r\n    refreshTokens\r\n};","import {createAsyncThunk} from \"@reduxjs/toolkit\";\r\n\r\nimport {authApi, LoginResponse, LoginData, RegisterResponse, RegisterData, GetCredentialsResponse} from \"@api/auth.api\";\r\n\r\nconst type = \"auth\";\r\n\r\nexport const fetchLogin = createAsyncThunk<LoginResponse, LoginData>(`${type}/fetchLogin`, async (args) => {\r\n    const {data} = await authApi.login(args);\r\n\r\n    return data;\r\n});\r\n\r\nexport const fetchRegister = createAsyncThunk<RegisterResponse, RegisterData>(`${type}/fetchRegister`, async (args) => {\r\n    const {data} = await authApi.register(args);\r\n\r\n    return data;\r\n});\r\n\r\nexport const fetchCredentials = createAsyncThunk<GetCredentialsResponse>(`${type}/fetchCredentials`, async () => {\r\n    const {data} = await authApi.getCredentials();\r\n\r\n    return data;\r\n});","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nimport {GetCredentialsResponse, LoginResponse, RegisterResponse} from \"@api/auth.api\";\r\nimport {Credentials} from \"./lib/typings\";\r\nimport * as actions from \"./actions\";\r\n\r\ninterface AuthState {\r\n  credentials: Credentials | null;\r\n  isAuthenticated: boolean;\r\n  areCredentialsFetching: boolean;\r\n  isLoginFetching: boolean;\r\n  isRegisterFetching: boolean;\r\n}\r\n\r\nexport const reducer = createReducer<AuthState>(\r\n  {\r\n    credentials: null,\r\n    isAuthenticated: false,\r\n    areCredentialsFetching: true,\r\n    isRegisterFetching: false,\r\n    isLoginFetching: false\r\n  },\r\n  {\r\n    [actions.fetchLogin.pending.type]: (state) => {\r\n      state.isLoginFetching = true;\r\n    },\r\n\r\n    [actions.fetchLogin.fulfilled.type]: (state, {payload}: PayloadAction<LoginResponse>) => {\r\n      state.isAuthenticated = true;\r\n      state.isLoginFetching = false;\r\n      state.credentials = payload.credentials;\r\n    },\r\n\r\n    [actions.fetchLogin.rejected.type]: (state) => {\r\n      state.isLoginFetching = false;\r\n    },\r\n\r\n    [actions.fetchRegister.pending.type]: (state) => {\r\n      state.isRegisterFetching = true;\r\n    },\r\n\r\n    [actions.fetchRegister.fulfilled.type]: (state, {payload}: PayloadAction<RegisterResponse>) => {\r\n      state.isAuthenticated = true;\r\n      state.isRegisterFetching = false;\r\n      state.credentials = payload.credentials;\r\n    },\r\n\r\n    [actions.fetchRegister.rejected.type]: (state) => {\r\n      state.isRegisterFetching = false;\r\n    },\r\n\r\n    [actions.fetchCredentials.pending.type]: (state) => {\r\n      state.areCredentialsFetching = true;\r\n    },\r\n\r\n    [actions.fetchCredentials.fulfilled.type]: (state, {payload}: PayloadAction<GetCredentialsResponse>) => {\r\n      state.isAuthenticated = true;\r\n      state.credentials = payload.credentials;\r\n      state.areCredentialsFetching = false;\r\n    },\r\n\r\n    [actions.fetchCredentials.rejected.type]: (state) => {\r\n      state.areCredentialsFetching = false;\r\n    }\r\n  }\r\n);","import {RootState} from \"@lib/typings\";\r\n\r\nconst stateSelector = (state: RootState) => state.auth;\r\n\r\nexport const credentials = (state: RootState) => stateSelector(state).credentials;\r\nexport const isAuthenticated = (state: RootState) => stateSelector(state).isAuthenticated;\r\nexport const areCredentialsFetching = (state: RootState) => stateSelector(state).areCredentialsFetching;","import styled, {css} from \"styled-components\";\r\n\r\ninterface LayoutProps {\r\n    width?: string | number;\r\n    height?: string | number;\r\n    justify?: \"flex-start\" | \"flex-end\" | \"center\" | \"space-around\" | \"space-between\" | \"space-evenly\" | \"safe center\" | \"unsafe center\";\r\n    align?: \"flex-start\" | \"flex-end\" | \"center\" | \"baseline\" | \"stretch\";\r\n    basis?: string | number;\r\n    grow?: number;\r\n    shrink?: number;\r\n    order?: string | number;\r\n    padding?: string | number;\r\n    gap?: string | number;\r\n    reverse?: boolean;\r\n    wrap?: string;\r\n}\r\n\r\nconst prop = (prop: any) => prop || \"initial\";\r\n\r\nconst mixins = (props: LayoutProps) => css`\r\n  width: ${prop(props.width)};\r\n  height: ${prop(props.height)};\r\n  justify-content: ${prop(props.justify)};\r\n  align-items: ${prop(props.align)};\r\n  flex-basis: ${prop(props.basis)};\r\n  flex-grow: ${prop(props.grow)};\r\n  flex-wrap: ${prop(props.wrap)};\r\n  flex-shrink: ${prop(props.shrink)};\r\n  order: ${prop(props.order)};\r\n  padding: ${prop(props.padding)};\r\n`;\r\n\r\nexport const Row = styled.div<LayoutProps>`\r\n  display: flex;\r\n  flex-direction: ${({reverse}) => reverse ? \"row-reverse\" : \"row\"};\r\n  ${mixins};\r\n  \r\n  ${(props) =>\r\n    props.gap && css`\r\n          & > :not(:first-child) {\r\n            margin-left: ${props.gap};\r\n          }\r\n  `}\r\n`;\r\n\r\nexport const Col = styled.div<LayoutProps>`\r\n  display: flex;\r\n  flex-direction: ${({reverse}) => reverse ? \"column-reverse\" : \"column\"};\r\n  ${mixins};\r\n  \r\n  ${(props) =>\r\n    props.gap && css`\r\n          & > :not(:first-child) {\r\n            margin-top: ${props.gap};\r\n          }\r\n  `}\r\n`;","import React, {SVGAttributes} from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\n\r\ninterface IconProps extends SVGAttributes<SVGElement>, SVGProps {\r\n    name: string;\r\n    pointer?: boolean;\r\n}\r\n\r\nexport const Icon: React.FC<IconProps> = ({name, ...props}) => {\r\n    switch (name) {\r\n        case \"rocket\":\r\n            return (\r\n                <SVG width=\"20rem\" height=\"20rem\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M221.867,341.333h-102.4c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533h102.4\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533v-34.133C230.4,345.156,226.577,341.333,221.867,341.333z M213.333,375.467H128V358.4h85.333\r\n\t\t\tV375.467z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M196.267,375.467H128c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,4.71,3.823,8.533,8.533,8.533h68.267\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533V384C204.8,379.29,200.977,375.467,196.267,375.467z M187.733,409.6h-51.2v-17.067h51.2V409.6z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M162.133,93.867C142.677,93.867,128,119.543,128,153.6c0,4.71,3.823,8.533,8.533,8.533h51.2\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533C196.267,119.543,181.589,93.867,162.133,93.867z M145.442,145.067\r\n\t\t\tc1.894-21.086,10.522-34.133,16.691-34.133s14.797,13.047,16.691,34.133H145.442z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M380.809,303.394l-52.437-43.699c-18.876-15.735-29.705-38.852-29.705-63.428c0-3.772-0.23-92.8-20.267-124.16\r\n\t\t\tc-4.958-7.748-13.329-12.373-22.4-12.373c-9.079,0-17.451,4.625-22.4,12.373c-20.036,31.36-20.267,120.388-20.267,124.16\r\n\t\t\tc0,24.585-10.829,47.701-29.705,63.428l-52.437,43.699c-12.877,10.718-20.258,26.487-20.258,43.247v3.226\r\n\t\t\tc0,4.71,3.823,8.533,8.533,8.533h93.867V384c0,4.71,3.823,8.533,8.533,8.533h68.267c4.71,0,8.533-3.823,8.533-8.533v-25.6h93.867\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533v-3.226C401.067,329.882,393.685,314.112,380.809,303.394z M290.133,341.333\r\n\t\t\tc-4.71,0-8.533,3.823-8.533,8.533v25.6h-51.2v-25.591c0-4.71-3.823-8.533-8.533-8.533h-93.508\r\n\t\t\tc1.306-9.66,6.153-18.509,13.756-24.841l52.437-43.699c22.784-18.978,35.849-46.874,35.849-76.535\r\n\t\t\tc0-24.328,3.174-92.416,17.579-114.97c3.593-5.632,12.433-5.632,16.034,0c14.413,22.545,17.587,90.633,17.587,114.97\r\n\t\t\tc0,29.662,13.065,57.557,35.849,76.527l52.437,43.699c7.595,6.34,12.45,15.189,13.756,24.841H290.133z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M392.533,341.333h-102.4c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533h102.4\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533v-34.133C401.067,345.156,397.244,341.333,392.533,341.333z M384,375.467h-85.333V358.4H384\r\n\t\t\tV375.467z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M384,375.467h-68.267c-4.71,0-8.533,3.823-8.533,8.533v34.133c0,4.71,3.823,8.533,8.533,8.533H384\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533V384C392.533,379.29,388.71,375.467,384,375.467z M375.467,409.6h-51.2v-17.067h51.2V409.6z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M349.867,93.867c-19.456,0-34.133,25.677-34.133,59.733c0,4.71,3.823,8.533,8.533,8.533h51.2\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533C384,119.543,369.323,93.867,349.867,93.867z M333.175,145.067\r\n\t\t\tc1.894-21.086,10.522-34.133,16.691-34.133c6.17,0,14.797,13.047,16.691,34.133H333.175z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M281.6,375.467h-51.2c-4.71,0-8.533,3.823-8.533,8.533v51.2c0,4.71,3.823,8.533,8.533,8.533h51.2\r\n\t\t\tc4.71,0,8.533-3.823,8.533-8.533V384C290.133,379.29,286.31,375.467,281.6,375.467z M273.067,426.667h-34.133v-34.133h34.133\r\n\t\t\tV426.667z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M221.867,273.067c-4.71,0-8.533,3.823-8.533,8.533v68.267c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533\r\n\t\t\tV281.6C230.4,276.89,226.577,273.067,221.867,273.067z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M290.133,273.067c-4.71,0-8.533,3.823-8.533,8.533v68.267c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V281.6\r\n\t\t\tC298.667,276.89,294.844,273.067,290.133,273.067z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M375.458,145.067h-51.2c-4.71,0-8.533,3.823-8.533,8.533v113.792c0,2.534,1.126,4.932,3.072,6.554l50.91,42.419\r\n\t\t\tc0.145,0.128,0.299,0.256,0.427,0.358c1.544,1.229,3.43,1.869,5.333,1.869c1.254,0,2.517-0.282,3.686-0.853\r\n\t\t\tc2.961-1.417,4.838-4.412,4.838-7.689V153.6C383.992,148.89,380.169,145.067,375.458,145.067z M366.933,291.823L332.8,263.381\r\n\t\t\tV162.133h34.133V291.823z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M187.733,145.067h-51.2c-4.71,0-8.533,3.823-8.533,8.533v156.459c0,3.277,1.877,6.272,4.838,7.689\r\n\t\t\tc1.178,0.563,2.44,0.845,3.695,0.845c1.903,0,3.789-0.64,5.333-1.877c0.128-0.102,0.273-0.23,0.418-0.358l50.91-42.428\r\n\t\t\tc1.946-1.621,3.072-4.019,3.072-6.554V153.6C196.267,148.89,192.444,145.067,187.733,145.067z M179.2,263.381l-34.133,28.442\r\n\t\t\tv-129.69H179.2V263.381z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M260.386,1.22c-2.705-1.621-6.076-1.621-8.781,0C210.586,25.83,179.2,48.913,179.2,102.4v164.983\r\n\t\t\tc0,3.311,1.92,6.323,4.924,7.731c1.152,0.538,2.381,0.802,3.61,0.802c1.963,0,3.908-0.683,5.47-1.988l1.357-1.135\r\n\t\t\tc22.775-18.987,35.84-46.874,35.84-76.527c0-24.328,3.174-92.416,17.579-114.97c3.593-5.632,12.433-5.623,16.034,0\r\n\t\t\tc14.413,22.545,17.587,90.633,17.587,114.97c0,29.662,13.065,57.557,35.84,76.535l1.365,1.126\r\n\t\t\tc2.534,2.116,6.084,2.577,9.079,1.178c2.995-1.408,4.915-4.42,4.915-7.731V102.4C332.8,48.913,301.414,25.839,260.386,1.22z\r\n\t\t\t M315.733,246.562c-10.991-14.285-17.067-31.88-17.067-50.295c0-3.772-0.23-92.8-20.267-124.16\r\n\t\t\tc-4.958-7.748-13.329-12.373-22.4-12.373c-9.079,0-17.451,4.625-22.4,12.373c-20.036,31.36-20.267,120.388-20.267,124.16\r\n\t\t\tc0,18.415-6.076,36.011-17.067,50.287V102.4c0-39.748,18.475-58.65,59.733-83.891c41.259,25.233,59.733,44.143,59.733,83.891\r\n\t\t\tV246.562z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M256,426.667c-14.592,0-25.6,18.338-25.6,42.667S241.408,512,256,512s25.6-18.338,25.6-42.667\r\n\t\t\tS270.592,426.667,256,426.667z M256,494.933c-2.125,0-8.533-9.079-8.533-25.6c0-16.521,6.409-25.6,8.533-25.6\r\n\t\t\ts8.533,9.079,8.533,25.6C264.533,485.854,258.125,494.933,256,494.933z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M296.021,144.256c-1.246-13.082-2.893-24.841-4.89-34.97c-0.785-4.002-4.292-6.886-8.371-6.886H229.24\r\n\t\t\tc-4.079,0-7.586,2.884-8.38,6.886c-1.997,10.163-3.644,21.931-4.89,34.97c-0.23,2.398,0.563,4.779,2.185,6.554\r\n\t\t\tc1.621,1.775,3.908,2.79,6.315,2.79h63.053c2.406,0,4.702-1.007,6.315-2.79C295.458,149.035,296.252,146.654,296.021,144.256z\r\n\t\t\t M233.958,136.533c0.708-6.059,1.51-11.759,2.406-17.067h39.287c0.887,5.291,1.69,10.999,2.398,17.067H233.958z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M196.267,443.733c-4.77,0-8.533,0-8.533-25.6c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533\r\n\t\t\tc0,15.957,0,42.667,25.6,42.667c4.71,0,8.533-3.823,8.533-8.533C204.8,447.556,200.977,443.733,196.267,443.733z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M179.2,494.933H17.067v-50.099c0-8.892,6.059-16.597,14.106-17.929c9.301-1.57,17.971,4.471,19.695,13.679\r\n\t\t\tc0.606,3.243,3.029,5.845,6.229,6.682c3.208,0.845,6.588-0.239,8.704-2.782c4.941-5.897,12.058-9.284,19.533-9.284\r\n\t\t\tc9.574,0,18.278,5.274,22.707,13.773c3.831,7.339,11.588,11.716,19.883,11.682c8.311-0.137,15.676-4.779,19.209-12.126\r\n\t\t\tc4.232-8.789,6.468-19.302,6.468-30.396c0-4.71-3.823-8.533-8.533-8.533c-4.71,0-8.533,3.823-8.533,8.533\r\n\t\t\tc0,8.431-1.698,16.597-4.779,22.989c-1.05,2.185-3.217,2.449-4.105,2.466c-0.657,0.077-3.226-0.128-4.48-2.517\r\n\t\t\tc-7.39-14.148-21.88-22.938-37.837-22.938c-8.141,0-16,2.364-22.75,6.69c-7.194-10.906-20.318-17.015-34.176-14.754\r\n\t\t\tC12.211,412.732,0,427.674,0,444.826v58.641C0,508.177,3.823,512,8.533,512H179.2c4.71,0,8.533-3.823,8.533-8.533\r\n\t\t\tS183.91,494.933,179.2,494.933z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M332.8,409.6c-4.71,0-8.533,3.823-8.533,8.533c0,25.6-3.763,25.6-8.533,25.6c-4.71,0-8.533,3.823-8.533,8.533\r\n\t\t\tc0,4.71,3.823,8.533,8.533,8.533c25.6,0,25.6-26.709,25.6-42.667C341.333,413.423,337.51,409.6,332.8,409.6z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M483.601,410.069c-13.841-2.244-26.982,3.849-34.176,14.763c-6.758-4.335-14.618-6.699-22.758-6.699\r\n\t\t\tc-15.957,0-30.447,8.789-37.837,22.946c-1.254,2.389-3.746,2.568-4.48,2.517c-0.879-0.017-3.055-0.29-4.105-2.466\r\n\t\t\tc-3.081-6.4-4.779-14.566-4.779-22.997c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533\r\n\t\t\tc0,11.102,2.236,21.606,6.46,30.396c3.533,7.347,10.897,11.989,19.208,12.126c8.405,0.008,16.051-4.344,19.883-11.682\r\n\t\t\tc4.437-8.499,13.141-13.773,22.716-13.773c7.467,0,14.592,3.388,19.524,9.284c2.125,2.543,5.513,3.627,8.704,2.782\r\n\t\t\tc3.2-0.828,5.623-3.439,6.229-6.682c1.724-9.216,10.394-15.249,19.703-13.679c8.047,1.323,14.106,9.028,14.106,17.92v50.108H332.8\r\n\t\t\tc-4.71,0-8.533,3.823-8.533,8.533S328.09,512,332.8,512h170.667c4.71,0,8.533-3.823,8.533-8.533v-58.633\r\n\t\t\tC512,427.682,499.789,412.732,483.601,410.069z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M51.2,13.534L13.534,51.2L51.2,88.866L88.866,51.2L51.2,13.534z M37.666,51.2L51.2,37.666L64.734,51.2L51.2,64.734\r\n\t\t\tL37.666,51.2z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M51.2,0c-4.71,0-8.533,3.823-8.533,8.533V25.6c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V8.533\r\n\t\t\tC59.733,3.823,55.91,0,51.2,0z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M93.867,42.667H76.8c-4.71,0-8.533,3.823-8.533,8.533s3.823,8.533,8.533,8.533h17.067c4.71,0,8.533-3.823,8.533-8.533\r\n\t\t\tS98.577,42.667,93.867,42.667z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M51.2,68.267c-4.71,0-8.533,3.823-8.533,8.533v17.067c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V76.8\r\n\t\t\tC59.733,72.09,55.91,68.267,51.2,68.267z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M25.6,42.667H8.533C3.823,42.667,0,46.49,0,51.2s3.823,8.533,8.533,8.533H25.6c4.71,0,8.533-3.823,8.533-8.533\r\n\t\t\tS30.31,42.667,25.6,42.667z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M503.467,247.467c-18.825,0-34.133-15.309-34.133-34.133c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533\r\n\t\t\tc0,18.825-15.309,34.133-34.133,34.133c-4.71,0-8.533,3.823-8.533,8.533s3.823,8.533,8.533,8.533\r\n\t\t\tc18.825,0,34.133,15.309,34.133,34.133c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533\r\n\t\t\tc0-18.825,15.309-34.133,34.133-34.133c4.71,0,8.533-3.823,8.533-8.533S508.177,247.467,503.467,247.467z M460.8,270.396\r\n\t\t\tc-3.797-5.7-8.695-10.607-14.396-14.396c5.7-3.789,10.607-8.687,14.396-14.396c3.797,5.7,8.695,10.607,14.396,14.396\r\n\t\t\tC469.495,259.797,464.589,264.695,460.8,270.396z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"logo\":\r\n            return (\r\n                <SVG width=\"6rem\" height=\"6rem\" viewBox=\"0 0 512 512\"{...props}>\r\n                    <g>\r\n                        <path\r\n                            d=\"m321.122 154.788c-33.498 11.166-69.181 34.552-100.478 65.848-27.755 27.756-33.967 65.027-14.142 84.854 5.95 5.95 13.581 9.644 22.31 10.962-22.794 14.623-45.641 24.142-65.604 26.923-4.774-10.254-15.172-17.383-27.208-17.383-6.179 0-11.926 1.879-16.704 5.094-13.568-17.273-9.749-50.813 10.024-88.032 2.384.612 4.881.938 7.453.938 16.542 0 30-13.458 30-30 0-6.458-2.058-12.44-5.543-17.341 5.357-6.303 11.042-12.493 16.989-18.44 38.052-38.053 83.52-63.615 118.66-66.712 5.501-.484 9.568-5.337 9.083-10.839-.484-5.501-5.335-9.571-10.839-9.083-40.208 3.542-89.197 30.643-131.046 72.491-6.765 6.766-13.212 13.832-19.258 21.028-2.562-.714-5.258-1.104-8.045-1.104-16.542 0-30 13.458-30 30 0 6.665 2.188 12.828 5.879 17.813-11.909 21.937-19.146 43.415-20.983 62.398-2.168 22.402 3.209 40.846 15.537 53.389-.779 2.668-1.205 5.483-1.205 8.399 0 16.542 13.458 30 30 30 14.022 0 25.824-9.671 29.096-22.692 39.275-5.15 85.938-31.632 126.26-71.953 27.756-27.756 33.968-65.028 14.142-84.853-5.97-5.969-13.635-9.661-22.399-10.968 14.869-9.538 29.865-16.936 44.348-21.763 27.86-9.288 50.79-7.668 62.903 4.447 19.542 19.542 11.165 64.682-20.084 111.396-4.245-2.304-9.105-3.614-14.265-3.614-16.542 0-30 13.458-30 30 0 7.138 2.51 13.698 6.688 18.854-22.865 22.648-48.074 40.779-72.993 52.465-23.58 11.058-45.576 15.529-61.93 12.601-5.436-.98-10.633 2.641-11.608 8.078s2.642 10.633 8.079 11.607c4.487.805 9.2 1.204 14.118 1.204 17.759 0 38.148-5.213 59.832-15.382 27.392-12.846 54.964-32.73 79.738-57.504.815-.815 1.627-1.638 2.436-2.463 1.828.35 3.712.54 5.641.54 16.542 0 30-13.458 30-30 0-3.856-.74-7.542-2.071-10.931 18.321-26.314 30.387-52.852 34.917-76.927 5.15-27.372.186-49.525-14.354-64.065-17.932-17.928-47.538-21.224-83.374-9.28zm-184.349 49.203c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10c-.001-5.514 4.485-10 10-10zm-.773 162c-5.514 0-10-4.486-10-10s4.486-10 10-10 10 4.486 10 10-4.486 10-10 10zm131.961-150.195c2.076-.415 4.79-.799 7.737-.799 5.25 0 11.237 1.218 15.657 5.638 11.499 11.498 5.022 37.404-14.143 56.568-9.952 9.952-21.733 16.693-33.174 18.981-5.776 1.153-16.493 2.062-23.394-4.839-11.499-11.499-5.023-37.404 14.142-56.568 9.953-9.951 21.735-16.692 33.175-18.981zm88.039 110.195c-5.514 0-10-4.486-10-10s4.486-10 10-10 10 4.486 10 10-4.486 10-10 10z\"/>\r\n                        <path\r\n                            d=\"m267.093 267.083c9.19-9.189 11.673-21.605 5.546-27.732-6.126-6.126-18.542-3.643-27.732 5.546s-11.673 21.605-5.546 27.732c6.126 6.127 18.542 3.644 27.732-5.546z\"/>\r\n                        <path\r\n                            d=\"m502 405.991c-16.542 0-30-13.458-30-30 0-5.522-4.478-10-10-10s-10 4.478-10 10c0 16.542-13.458 30-30 30-5.522 0-10 4.478-10 10 0 5.523 4.478 10 10 10 16.542 0 30 13.458 30 30 0 5.523 4.478 10 10 10s10-4.477 10-10c0-16.542 13.458-30 30-30 5.522 0 10-4.477 10-10s-4.478-10-10-10z\"/>\r\n                        <path\r\n                            d=\"m60 135.991c0-16.542 13.458-30 30-30 5.523 0 10-4.478 10-10s-4.477-10-10-10c-16.542 0-30-13.458-30-30 0-5.522-4.477-10-10-10s-10 4.478-10 10c0 16.542-13.458 30-30 30-5.523 0-10 4.478-10 10s4.477 10 10 10c16.542 0 30 13.458 30 30 0 5.522 4.477 10 10 10s10-4.478 10-10z\"/>\r\n                        <path\r\n                            d=\"m486 235.991c0-13.106-8.451-24.268-20.186-28.343-1.903-44.814-18.434-83.992-47.955-113.516-29.986-29.985-70.026-46.598-115.793-48.042-42.263-1.316-87.141 11.012-126.92 34.823-5.199-4.32-11.873-6.923-19.145-6.923-16.542 0-30 13.458-30 30 0 4.339.933 8.461 2.598 12.188-2.133 2.005-4.251 4.034-6.313 6.097-42.973 42.973-69.692 97.175-75.237 152.62-5.62 56.196 11.105 106.964 47.094 142.953 31.424 31.424 74.112 48.16 121.847 48.16 6.934 0 13.979-.354 21.106-1.066 55.445-5.545 109.647-32.265 152.62-75.237 35.535-35.536 59.806-78.305 70.454-124.011 14.574-2.036 25.83-14.576 25.83-29.703zm-30 10c-5.514 0-10-4.486-10-10s4.486-10 10-10 10 4.486 10 10c0 5.513-4.486 10-10 10zm-300-152c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm219.572 281.572c-81.45 81.45-201.355 94.075-267.288 28.144-31.666-31.668-46.346-76.707-41.335-126.821 5.086-50.865 29.761-100.751 69.479-140.469 1.936-1.937 3.924-3.841 5.928-5.723 4.096 2.102 8.732 3.296 13.644 3.296 16.542 0 30-13.458 30-30 0-2.024-.204-4.001-.588-5.914 36.521-21.868 77.537-33.206 116.023-31.996 40.59 1.281 75.958 15.871 102.281 42.194 25.751 25.751 40.245 60.08 42.082 99.505-11.535 4.185-19.798 15.251-19.798 28.212 0 10.897 5.842 20.455 14.557 25.709-9.811 41.374-32.728 81.606-64.985 113.863z\"/>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"loupe\":\r\n            return (\r\n                <SVG width=\"2rem\" height=\"2rem\" viewBox=\"0 0 512.005 512.005\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M505.749,475.587l-145.6-145.6c28.203-34.837,45.184-79.104,45.184-127.317c0-111.744-90.923-202.667-202.667-202.667\r\n\t\t\tS0,90.925,0,202.669s90.923,202.667,202.667,202.667c48.213,0,92.48-16.981,127.317-45.184l145.6,145.6\r\n\t\t\tc4.16,4.16,9.621,6.251,15.083,6.251s10.923-2.091,15.083-6.251C514.091,497.411,514.091,483.928,505.749,475.587z\r\n\t\t\t M202.667,362.669c-88.235,0-160-71.765-160-160s71.765-160,160-160s160,71.765,160,160S290.901,362.669,202.667,362.669z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"attachment\":\r\n            return (\r\n                <SVG width=\"2.25rem\" height=\"2.25rem\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\"{...props}\r\n                >\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M446.661,37.298c-49.731-49.731-130.641-49.731-180.372,0L76.378,227.208c-5.861,5.861-5.861,15.356,0,21.217\r\n\t\t\tc5.861,5.861,15.356,5.861,21.217,0l189.91-189.91c36.865-36.836,101.073-36.836,137.938,0c38.023,38.023,38.023,99.901,0,137.924\r\n\t\t\tl-265.184,268.17c-22.682,22.682-62.2,22.682-84.881,0c-23.4-23.4-23.4-61.467,0-84.867l254.576-257.577\r\n\t\t\tc8.498-8.498,23.326-8.498,31.825,0c8.776,8.776,8.776,23.063,0,31.84L117.826,400.958c-5.06,5.06-5.06,16.156,0,21.217\r\n\t\t\tc5.861,5.861,15.356,5.861,21.217,0l243.952-246.954c20.485-20.485,20.485-53.789,0-74.273c-19.839-19.839-54.449-19.81-74.258,0\r\n\t\t\tL54.161,358.524c-34.826,34.826-34.826,92.474,0,127.301C71.173,502.837,93.781,512,117.825,512s46.654-9.163,63.651-26.174\r\n\t\t\tL446.66,217.655C496.391,167.924,496.391,87.028,446.661,37.298z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"smile\":\r\n            return (\r\n                <SVG width=\"2.35rem\" height=\"2.35rem\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M437.02,74.98C388.667,26.629,324.38,0,256,0S123.333,26.629,74.98,74.98C26.629,123.333,0,187.62,0,256\r\n\t\t\ts26.629,132.668,74.98,181.02C123.333,485.371,187.62,512,256,512s132.667-26.629,181.02-74.98\r\n\t\t\tC485.371,388.668,512,324.38,512,256S485.371,123.333,437.02,74.98z M256,472c-119.103,0-216-96.897-216-216S136.897,40,256,40\r\n\t\t\ts216,96.897,216,216S375.103,472,256,472z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M368.993,285.776c-0.072,0.214-7.298,21.626-25.02,42.393C321.419,354.599,292.628,368,258.4,368\r\n\t\t\tc-34.475,0-64.195-13.561-88.333-40.303c-18.92-20.962-27.272-42.54-27.33-42.691l-37.475,13.99\r\n\t\t\tc0.42,1.122,10.533,27.792,34.013,54.273C171.022,389.074,212.215,408,258.4,408c46.412,0,86.904-19.076,117.099-55.166\r\n\t\t\tc22.318-26.675,31.165-53.55,31.531-54.681L368.993,285.776z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <circle cx=\"168\" cy=\"180.12\" r=\"32\"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <circle cx=\"344\" cy=\"180.12\" r=\"32\"/>\r\n                        </g>\r\n                    </g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"microphone\":\r\n            return (\r\n                <SVG width=\"2.35rem\" height=\"2.35rem\" viewBox=\"0 0 250.189 250.189\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <path\r\n                            d=\"M214.408,119.658c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5c0,40.976-33.337,74.313-74.313,74.313\r\n\t\tc-40.976,0-74.313-33.338-74.313-74.313c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5c0,46.722,36.062,85.173,81.813,88.995\r\n\t\tv26.536H84.188c-4.142,0-7.5,3.357-7.5,7.5c0,4.143,3.358,7.5,7.5,7.5h81.813c4.142,0,7.5-3.357,7.5-7.5c0-4.143-3.358-7.5-7.5-7.5\r\n\t\th-33.407v-26.536C178.345,204.831,214.408,166.38,214.408,119.658z\"\r\n                        />\r\n                        <path\r\n                            d=\"M125.094,168.064c26.692,0,48.407-21.715,48.407-48.406V48.406C173.501,21.715,151.786,0,125.094,0\r\n\t\tC98.403,0,76.688,21.715,76.688,48.406v71.252C76.688,146.35,98.403,168.064,125.094,168.064z M91.688,48.406\r\n\t\tc0-18.42,14.986-33.406,33.406-33.406c18.421,0,33.407,14.986,33.407,33.406v71.252c0,18.42-14.986,33.406-33.407,33.406\r\n\t\tc-18.42,0-33.406-14.986-33.406-33.406V48.406z\"\r\n                        />\r\n                    </g>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                    <g></g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"telegram\":\r\n            return (\r\n                <SVG width=\"2.5rem\" height=\"2.5rem\" viewBox=\"0 -39 512.00011 512\"{...props}>\r\n                    <path\r\n                        d=\"m504.09375 11.859375c-6.253906-7.648437-15.621094-11.859375-26.378906-11.859375-5.847656 0-12.042969 1.230469-18.410156 3.664062l-433.398438 165.441407c-23 8.777343-26.097656 21.949219-25.8984375 29.019531s4.0390625 20.046875 27.4999995 27.511719c.140626.042969.28125.085937.421876.125l89.898437 25.726562 48.617187 139.023438c6.628907 18.953125 21.507813 30.726562 38.835938 30.726562 10.925781 0 21.671875-4.578125 31.078125-13.234375l55.605469-51.199218 80.652344 64.941406c.007812.007812.019531.011718.027343.019531l.765625.617187c.070313.054688.144532.113282.214844.167969 8.964844 6.953125 18.75 10.625 28.308594 10.628907h.003906c18.675781 0 33.546875-13.824219 37.878906-35.214844l71.011719-350.640625c2.851563-14.074219.460937-26.667969-6.734375-35.464844zm-356.191406 234.742187 173.441406-88.605468-107.996094 114.753906c-1.769531 1.878906-3.023437 4.179688-3.640625 6.683594l-20.824219 84.351562zm68.132812 139.332032c-.71875.660156-1.441406 1.25-2.164062 1.792968l19.320312-78.25 35.144532 28.300782zm265.390625-344.566406-71.011719 350.644531c-.683593 3.355469-2.867187 11.164062-8.480468 11.164062-2.773438 0-6.257813-1.511719-9.824219-4.257812l-91.390625-73.585938c-.011719-.011719-.027344-.023437-.042969-.03125l-54.378906-43.789062 156.175781-165.949219c5-5.3125 5.453125-13.449219 1.074219-19.285156-4.382813-5.835938-12.324219-7.671875-18.820313-4.351563l-256.867187 131.226563-91.121094-26.070313 433.265625-165.390625c3.660156-1.398437 6.214844-1.691406 7.710938-1.691406.917968 0 2.550781.109375 3.15625.855469.796875.972656 1.8125 4.289062.554687 10.511719zm0 0\"/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"pause\":\r\n            return (\r\n                <SVG width=\"2.5rem\" height=\"2.5rem\" viewBox=\"0 0 511.448 511.448\"{...props}>\r\n                    <path\r\n                        d=\"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z\"/>\r\n                    <path\r\n                        d=\"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z\"/>\r\n                    <path\r\n                        d=\"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z\"/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"wave\":\r\n            return (\r\n                <SVG width=\"4rem\" height=\"4rem\" viewBox=\"0 0 512 512\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M229.322,189.02c-9.406,0-17.029,7.623-17.029,17.029v99.902c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.029v-99.902C246.35,196.643,238.727,189.02,229.322,189.02z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M176.532,136.231c-9.406,0-17.029,7.623-17.029,17.029v205.487c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.034V153.259C193.561,143.854,185.938,136.231,176.532,136.231z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M123.175,86.847c-9.406,0-17.029,7.623-17.029,17.029v304.248c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.029V103.876C140.204,94.47,132.581,86.847,123.175,86.847z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M70.386,136.231c-9.406,0-17.029,7.623-17.029,17.029v205.487c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.034V153.259C87.415,143.854,79.791,136.231,70.386,136.231z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M17.029,185.614C7.623,185.614,0,193.237,0,202.643v106.714c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.618,17.029-17.029V202.643C34.058,193.237,26.434,185.614,17.029,185.614z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M388.825,86.847c-9.406,0-17.029,7.623-17.029,17.029v304.248c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.029V103.876C405.854,94.47,398.23,86.847,388.825,86.847z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M335.468,136.231c-9.406,0-17.029,7.623-17.029,17.029v205.487c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\tc9.406,0,17.029-7.623,17.029-17.034V153.259C352.497,143.854,344.873,136.231,335.468,136.231z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M282.679,162.909c-9.406,0-17.029,7.623-17.029,17.029v152.124c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\tc9.406,0,17.029-7.618,17.029-17.029V179.938C299.707,170.532,292.084,162.909,282.679,162.909z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M441.614,136.231c-9.406,0-17.029,7.623-17.029,17.029v205.487c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\ts17.029-7.623,17.029-17.034V153.259C458.643,143.854,451.02,136.231,441.614,136.231z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M494.971,185.614c-9.406,0-17.029,7.623-17.029,17.029v106.714c0,9.406,7.623,17.029,17.029,17.029\r\n\t\t\tc9.406,0,17.029-7.618,17.029-17.029V202.643C512,193.237,504.377,185.614,494.971,185.614z\"\r\n                            />\r\n                        </g>\r\n                    </g>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"check\":\r\n            return (\r\n                <SVG width=\"1.1rem\" height=\"1.1rem\" viewBox=\"0 0 240.608 240.608\" xmlSpace=\"preserve\"{...props}>\r\n                    <path\r\n                        d=\"M208.789,29.972l31.819,31.82L91.763,210.637L0,118.876l31.819-31.82l59.944,59.942L208.789,29.972z\"/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                    <g/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"double-check\":\r\n            return (\r\n                <SVG width=\"1rem\" height=\"1rem\" viewBox=\"0 0 512 512\"{...props}\r\n                >\r\n                    <g>\r\n                        <path\r\n                            d=\"m473.074 120.729-203.295 203.296-21.212-21.212 153.765-153.764-38.926-38.926-153.765 153.765-61.047-61.047-38.926 38.926 61.047 61.047-21.211 21.211-110.578-110.577-38.926 38.926 149.503 149.503 60.138-60.137 60.137 60.137 242.222-242.221z\"/>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"picture\":\r\n            return (\r\n                <SVG width=\"2rem\" height=\"2rem\" viewBox=\"0 0 512 512\"{...props}>\r\n                    <g>\r\n                        <path\r\n                            d=\"m305.261 228.677c34.557 0 62.67-28.188 62.67-62.838s-28.113-62.838-62.67-62.838c-34.556 0-62.669 28.188-62.669 62.838s28.113 62.838 62.669 62.838zm0-95.676c18.015 0 32.67 14.731 32.67 32.838s-14.655 32.838-32.67 32.838c-18.014 0-32.669-14.731-32.669-32.838s14.655-32.838 32.669-32.838z\"/>\r\n                        <path\r\n                            d=\"m497 43.001h-482c-8.284 0-15 6.716-15 15v395.998c0 .043.006.084.006.127 0 5.774 4.788 14.873 15 14.873 351.442-.167 448.77 0 481.993 0 8.284 0 15-6.716 15-15 0-11.141 0-386.102 0-395.998.001-8.284-6.715-15-14.999-15zm-15 30v239.44l-66.18-66.415c-5.86-5.881-15.39-5.88-21.25 0l-89.309 89.625-86.128-86.434c-5.86-5.881-15.39-5.88-21.25 0l-167.883 168.478v-344.694zm-430.86 365.98 157.368-157.925c.001.001 157.219 157.776 157.219 157.776zm430.86.018h-73.757l-81.807-82.097 78.759-79.037 76.805 77.077z\"/>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"cross\":\r\n            return (\r\n                <SVG width=\"1rem\" height=\"1rem\" viewBox=\"0 0 22.88 22.88\" xmlSpace=\"preserve\"{...props}>\r\n                    <path d=\"M0.324,1.909c-0.429-0.429-0.429-1.143,0-1.587c0.444-0.429,1.143-0.429,1.587,0l9.523,9.539\r\n\tl9.539-9.539c0.429-0.429,1.143-0.429,1.571,0c0.444,0.444,0.444,1.159,0,1.587l-9.523,9.524l9.523,9.539\r\n\tc0.444,0.429,0.444,1.143,0,1.587c-0.429,0.429-1.143,0.429-1.571,0l-9.539-9.539l-9.523,9.539c-0.444,0.429-1.143,0.429-1.587,0\r\n\tc-0.429-0.444-0.429-1.159,0-1.587l9.523-9.539L0.324,1.909z\"/>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"pencil\":\r\n            return (\r\n                <SVG width=\"1.5rem\" height=\"1.5rem\" viewBox=\"0 0 512.001 512.001\" xmlSpace=\"preserve\"{...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path d=\"M496.063,62.299l-46.396-46.4c-21.199-21.199-55.689-21.198-76.888,0C352.82,35.86,47.964,340.739,27.591,361.113\r\n\t\t\tc-2.17,2.17-3.624,5.054-4.142,7.875L0.251,494.268c-0.899,4.857,0.649,9.846,4.142,13.339c3.497,3.497,8.487,5.042,13.338,4.143\r\n\t\t\tL143,488.549c2.895-0.54,5.741-2.008,7.875-4.143l345.188-345.214C517.311,117.944,517.314,83.55,496.063,62.299z M33.721,478.276\r\n\t\t\tl14.033-75.784l61.746,61.75L33.721,478.276z M140.269,452.585L59.41,371.721L354.62,76.488l80.859,80.865L140.269,452.585z\r\n\t\t\t M474.85,117.979l-18.159,18.161l-80.859-80.865l18.159-18.161c9.501-9.502,24.96-9.503,34.463,0l46.396,46.4\r\n\t\t\tC484.375,93.039,484.375,108.453,474.85,117.979z\"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"uploading-image\":\r\n            return (\r\n                <SVG width=\"2.25rem\" height=\"2.25rem\" viewBox=\"0 -18 512 512\" {...props}>\r\n                    <path\r\n                        d=\"m432 0h-352c-44.113281 0-80 35.886719-80 80v280c0 44.113281 35.886719 80 80 80h190c7.628906 0 14.59375-4.339844 17.957031-11.191406 3.359375-6.847656 2.53125-15.015625-2.140625-21.046875l-52.3125-67.609375 144.992188-184.425782 93.503906 111.546876v33.726562c0 11.046875 8.953125 20 20 20s20-8.953125 20-20v-221c0-44.113281-35.886719-80-80-80zm-38.671875 111.152344c-3.871094-4.617188-9.609375-7.253906-15.640625-7.148438-6.027344.09375-11.6875 2.898438-15.410156 7.636719l-154.015625 195.894531-52.445313-67.773437c-3.789062-4.898438-9.628906-7.761719-15.816406-7.761719-.007812 0-.019531 0-.027344 0-6.199218.007812-12.046875 2.890625-15.824218 7.804688l-44.015626 57.21875c-6.734374 8.757812-5.097656 21.3125 3.65625 28.046874 8.757813 6.738282 21.3125 5.097657 28.046876-3.65625l28.210937-36.671874 89.1875 115.257812h-149.234375c-22.054688 0-40-17.945312-40-40v-280c0-22.054688 17.945312-40 40-40h352c22.054688 0 40 17.945312 40 40v125.007812zm-253.328125-39.152344c-33.085938 0-60 26.914062-60 60s26.914062 60 60 60 60-26.914062 60-60-26.914062-60-60-60zm0 80c-11.027344 0-20-8.972656-20-20s8.972656-20 20-20 20 8.972656 20 20-8.972656 20-20 20zm372 229c0 11.046875-8.953125 20-20 20h-55v55c0 11.046875-8.953125 20-20 20s-20-8.953125-20-20v-55h-55c-11.046875 0-20-8.953125-20-20s8.953125-20 20-20h55v-55c0-11.046875 8.953125-20 20-20s20 8.953125 20 20v55h55c11.046875 0 20 8.953125 20 20zm0 0\"/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"document\":\r\n            return (\r\n                <SVG width=\"2.5rem\" height=\"2.5rem\" viewBox=\"0 0 512 512\"{...props}>\r\n                    <path\r\n                        d=\"m433.798 106.268-96.423-91.222c-10.256-9.703-23.68-15.046-37.798-15.046h-183.577c-30.327 0-55 24.673-55 55v402c0 30.327 24.673 55 55 55h280c30.327 0 55-24.673 55-55v-310.778c0-15.049-6.27-29.612-17.202-39.954zm-29.137 13.732h-74.661c-2.757 0-5-2.243-5-5v-70.364zm-8.661 362h-280c-13.785 0-25-11.215-25-25v-402c0-13.785 11.215-25 25-25h179v85c0 19.299 15.701 35 35 35h91v307c0 13.785-11.215 25-25 25z\"/>\r\n                    <path\r\n                        d=\"m363 200h-220c-8.284 0-15 6.716-15 15s6.716 15 15 15h220c8.284 0 15-6.716 15-15s-6.716-15-15-15z\"/>\r\n                    <path\r\n                        d=\"m363 280h-220c-8.284 0-15 6.716-15 15s6.716 15 15 15h220c8.284 0 15-6.716 15-15s-6.716-15-15-15z\"/>\r\n                    <path\r\n                        d=\"m215.72 360h-72.72c-8.284 0-15 6.716-15 15s6.716 15 15 15h72.72c8.284 0 15-6.716 15-15s-6.716-15-15-15z\"/>\r\n                </SVG>\r\n            );\r\n\r\n        case \"play\":\r\n            return (\r\n                <SVG width=\"2.5rem\" height=\"2.5rem\" viewBox=\"0 0 30.051 30.051\" xmlSpace=\"preserve\" {...props}>\r\n                    <g>\r\n                        <path d=\"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069\r\n\t\tc0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532\r\n\t\tc0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z\"/>\r\n                        <path d=\"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021\r\n\t\tC30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518\r\n\t\tc6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z\"/>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                        <g>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n        case \"audio\":\r\n            return (\r\n                <SVG width=\"2rem\" height=\"2rem\" viewBox=\"0 0 477.867 477.867\"\r\n                     xmlSpace=\"preserve\" {...props}>\r\n                    <g>\r\n                        <g>\r\n                            <path\r\n                                d=\"M238.933,0C107.033,0.141,0.141,107.033,0,238.933v187.733c0,28.277,22.923,51.2,51.2,51.2h68.267    c9.426,0,17.067-7.641,17.067-17.067V290.133c0-9.426-7.641-17.067-17.067-17.067H51.2c-5.827,0.057-11.601,1.119-17.067,3.14    v-37.274c0-113.108,91.692-204.8,204.8-204.8s204.8,91.692,204.8,204.8v37.274c-5.466-2.021-11.239-3.084-17.067-3.14H358.4    c-9.426,0-17.067,7.641-17.067,17.067V460.8c0,9.426,7.641,17.067,17.067,17.067h68.267c28.277,0,51.2-22.923,51.2-51.2V238.933    C477.726,107.033,370.834,0.141,238.933,0z M51.2,307.2h51.2v136.533H51.2c-9.426,0-17.067-7.641-17.067-17.067v-102.4    C34.133,314.841,41.774,307.2,51.2,307.2z M443.733,426.667c0,9.426-7.641,17.067-17.067,17.067h-51.2V307.2h51.2    c9.426,0,17.067,7.641,17.067,17.067V426.667z\"/>\r\n                        </g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                    <g>\r\n                    </g>\r\n                </SVG>\r\n            );\r\n\r\n      case \"options\":\r\n        return (\r\n          <SVG width=\"2rem\" height=\"2rem\" viewBox=\"-192 0 512 512\" {...props}>\r\n            <path d=\"m128 256c0 35.347656-28.652344 64-64 64s-64-28.652344-64-64 28.652344-64 64-64 64 28.652344 64 64zm0 0\"/>\r\n            <path d=\"m128 64c0 35.347656-28.652344 64-64 64s-64-28.652344-64-64 28.652344-64 64-64 64 28.652344 64 64zm0 0\"/>\r\n            <path d=\"m128 448c0 35.347656-28.652344 64-64 64s-64-28.652344-64-64 28.652344-64 64-64 64 28.652344 64 64zm0 0\"/>\r\n          </SVG>\r\n        );\r\n\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\ninterface SVGProps {\r\n    secondary?: boolean;\r\n    width?: string | number;\r\n    height?: string | number;\r\n    pointer?: boolean;\r\n}\r\n\r\nconst SVG = styled.svg<SVGProps>`\r\n  ${({theme, secondary, width, height}) => css`\r\n    width: ${width};\r\n    height: ${height};\r\n    min-width: ${width};\r\n    min-height: ${height};\r\n    fill: ${secondary ? theme.palette.text.secondary : theme.palette.text.primary};\r\n  `};\r\n  \r\n  ${({pointer}) => pointer && css`\r\n    cursor: pointer;\r\n  `};\r\n`;","import styled, {css} from \"styled-components\";\r\n\r\ninterface HeadingProps {\r\n    align?: \"left\" | \"center\" | \"right\";\r\n}\r\n\r\nconst mixins = (props: HeadingProps) => css`\r\n    text-align: ${props.align};\r\n`;\r\n\r\nexport const H1 = styled.h1<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h1.fontFamily};\r\n        font-weight: ${theme.typography.h1.fontWeight};\r\n        font-size: ${theme.typography.h1.fontSize};\r\n        letter-spacing: ${theme.typography.h1.letterSpacing};\r\n        line-height: ${theme.typography.h1.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;\r\n\r\nexport const H2 = styled.h2<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h2.fontFamily};\r\n        font-weight: ${theme.typography.h2.fontWeight};\r\n        font-size: ${theme.typography.h2.fontSize};\r\n        letter-spacing: ${theme.typography.h2.letterSpacing};\r\n        line-height: ${theme.typography.h2.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;\r\n\r\nexport const H3 = styled.h3<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h3.fontFamily};\r\n        font-weight: ${theme.typography.h3.fontWeight};\r\n        font-size: ${theme.typography.h3.fontSize};\r\n        letter-spacing: ${theme.typography.h3.letterSpacing};\r\n        line-height: ${theme.typography.h3.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;\r\n\r\nexport const H4 = styled.h4<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h4.fontFamily};\r\n        font-weight: ${theme.typography.h4.fontWeight};\r\n        font-size: ${theme.typography.h4.fontSize};\r\n        letter-spacing: ${theme.typography.h4.letterSpacing};\r\n        line-height: ${theme.typography.h4.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;\r\n\r\nexport const H5 = styled.h5<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h5.fontFamily};\r\n        font-weight: ${theme.typography.h5.fontWeight};\r\n        font-size: ${theme.typography.h5.fontSize};\r\n        letter-spacing: ${theme.typography.h5.letterSpacing};\r\n        line-height: ${theme.typography.h5.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;\r\n\r\nexport const H6 = styled.h6<HeadingProps>`\r\n    ${({theme}) => css`\r\n        color: ${theme.palette.text.primary};\r\n        font-family: ${theme.typography.h6.fontFamily};\r\n        font-weight: ${theme.typography.h6.fontWeight};\r\n        font-size: ${theme.typography.h6.fontSize};\r\n        letter-spacing: ${theme.typography.h6.letterSpacing};\r\n        line-height: ${theme.typography.h6.lineHeight};\r\n    `};\r\n    \r\n    ${mixins};\r\n`;","import styled, {css} from \"styled-components\";\r\n\r\ninterface ButtonProps {\r\n    pure?: boolean;\r\n    danger?: boolean;\r\n    small?: boolean;\r\n}\r\n\r\nexport const Button = styled.button<ButtonProps>`\r\n  ${({theme}) => css`\r\n    color: ${theme.palette.text.primary};\r\n    font-family: ${theme.typography.fontFamily};\r\n    font-weight: ${theme.typography.fontWeight.regular};\r\n    font-size: ${theme.typography.fontSize};\r\n    background-color: ${theme.palette.primary.light};\r\n  `};\r\n  \r\n  opacity: 1;\r\n  cursor: pointer;\r\n  border: none;\r\n  outline: none;\r\n  border-radius: 0.5rem;\r\n  padding: 1.5rem 2.5rem;\r\n  \r\n  ${({small}) => css`\r\n    font-size: ${small && \"1.2rem\"};\r\n    padding: ${small && \"1rem 1.5rem\"};\r\n  `};\r\n  \r\n  ${({theme, danger}) => css`\r\n    background-color: ${danger && theme.palette.error.main};\r\n  `};\r\n  \r\n  ${({disabled}) => css`\r\n    opacity: ${disabled && \"0.4\"};\r\n    cursor: ${disabled && \"not-allowed\"};\r\n  `};\r\n  \r\n  ${({pure}) => css`\r\n    background: ${pure && \"transparent\"};\r\n    padding: ${pure && \"0\"};\r\n  `};\r\n`;","import React, {InputHTMLAttributes, forwardRef} from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\n\r\nimport {Col} from \"@lib/layout\";\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n    label?: React.ReactNode;\r\n    error?: string;\r\n    transparent?: boolean;\r\n    small?: boolean;\r\n    invisible?: boolean;\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(({error, label, name, width, ...props}, ref) => (\r\n    <Wrapper width={width}>\r\n        {label && <Label htmlFor={name}>{label}</Label>}\r\n        <InputNative id={name} name={name} error={!!error} ref={ref} {...props} />\r\n        {error && <ErrorLabel>{error}</ErrorLabel>}\r\n    </Wrapper>\r\n));\r\n\r\nconst Wrapper = styled(Col).attrs(() => ({\r\n    gap: \"1.5rem\"\r\n}))`  \r\n  & > [hidden] {\r\n    margin-top: 0;\r\n  }\r\n`;\r\n\r\ninterface InputNativeProps {\r\n    error?: boolean;\r\n    transparent?: boolean;\r\n    small?: boolean;\r\n    invisible?: boolean;\r\n}\r\n\r\nconst InputNative = styled.input<InputNativeProps>`\r\n    ${({theme}) => css`\r\n      color: ${theme.palette.text.primary};\r\n      font-family: ${theme.typography.fontFamily};\r\n      font-weight: ${theme.typography.fontWeight.regular};\r\n      font-size: ${theme.typography.fontSize};\r\n      background-color: ${theme.palette.primary.light};\r\n      \r\n      &::placeholder {\r\n        color: ${theme.palette.text.secondary};\r\n      }\r\n    `};\r\n    \r\n    border: none;\r\n    border-radius: 1rem;\r\n    outline: none;\r\n    padding: 1.5rem 2rem;\r\n    \r\n    ${({transparent}) => css`\r\n      background-color: ${transparent && \"transparent\"};\r\n    `};\r\n    \r\n    ${({small}) => css`\r\n      font-size: ${small && \"1.2rem\"};\r\n      padding: ${small && \"1rem 1.5rem\"};\r\n    `};\r\n\r\n    ${({theme, error}) => css`\r\n      border: ${error && `2px solid ${theme.palette.error.main}`};\r\n    `};\r\n    \r\n    ${({invisible}) => invisible && css`\r\n      display: none;\r\n    `}\r\n`;\r\n\r\nconst Label = styled.label`\r\n    ${({theme}) => css`\r\n      color: ${theme.palette.text.primary};\r\n      font-size: ${theme.typography.fontSize};\r\n      font-family: ${theme.typography.fontFamily};\r\n      font-weight: ${theme.typography.fontWeight.medium};\r\n    `};\r\n    \r\n    display: flex;\r\n    text-transform: uppercase;\r\n`;\r\n\r\nconst ErrorLabel = styled.span`\r\n    ${({theme}) => css`\r\n      color: ${theme.palette.error.main};\r\n      font-family: ${theme.typography.fontFamily};\r\n      font-weight: ${theme.typography.fontWeight.medium};\r\n      font-size: ${theme.typography.fontSize};\r\n    `};\r\n    \r\n    margin-top: 15px;\r\n`;","import styled, {css} from \"styled-components\";\r\n\r\ninterface TextProps {\r\n  clickable?: boolean;\r\n  secondary?: boolean;\r\n  ellipsis?: boolean;\r\n  small?: boolean;\r\n  width?: string;\r\n}\r\n\r\nexport const Text = styled.span<TextProps>`\r\n  ${({theme, width}) => css`\r\n    color: ${theme.palette.text.primary};\r\n    font-family: ${theme.typography.fontFamily};\r\n    font-weight: ${theme.typography.fontWeight.regular};\r\n    font-size: ${theme.typography.fontSize};\r\n    width: ${width};\r\n  `};\r\n  \r\n  ${({theme, secondary}) => css`\r\n    color: ${secondary && theme.palette.text.secondary};\r\n  `};\r\n  \r\n  ${({clickable}) => css`\r\n    cursor: ${clickable && \"pointer\"};\r\n  `};\r\n  \r\n  ${({ellipsis}) => ellipsis && css`\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n  `};\r\n  \r\n  ${({small}) => css`\r\n    font-size: ${small && \"1.2rem\"};\r\n  `};\r\n`;","import styled from \"styled-components\";\r\n\r\nexport const Circle = styled.div`\r\n  color: ${({theme}) => theme.palette.text.primary};\r\n  font-size: 0.8rem;\r\n  background-color: ${({theme}) => theme.palette.warning.main};\r\n  border-radius: 50%;\r\n  padding: 0.5rem;\r\n`;","import React from \"react\";\r\nimport styled, {keyframes} from \"styled-components\";\r\n\r\nexport const Loader: React.FC = () => (\r\n  <Wrapper>\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n  </Wrapper>\r\n);\r\n\r\nconst spin = keyframes`\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  \r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 1rem;\r\n  height: 1rem;\r\n  \r\n  > div {\r\n    width: 2rem;\r\n    height: 2rem;\r\n    position: absolute;\r\n    border: 0.25rem solid #fff;\r\n    border-radius: 50%;\r\n    animation: ${spin} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\r\n    border-color: #fff transparent transparent transparent;\r\n    \r\n    &:nth-child(1) {\r\n      animation-delay: -0.45s;\r\n    }\r\n\r\n    &:nth-child(2) {\r\n      animation-delay: -0.3s;\r\n    }\r\n  \r\n    &:nth-child(3) {\r\n      animation-delay: -0.15s;\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\ninterface MainTemplateProps {\r\n    header?: React.ReactNode;\r\n    footer?: React.ReactNode;\r\n}\r\n\r\nexport const MainTemplate: React.FC<MainTemplateProps> = ({children, header, footer}) => (\r\n    <Template>\r\n        {header && <Header>{header}</Header>}\r\n        <main>{children}</main>\r\n        {footer && <footer>{footer}</footer>}\r\n    </Template>\r\n);\r\n\r\nconst Template = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst Header = styled.header`\r\n  z-index: 100;\r\n`;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {Row, Col} from \"@lib/layout\";\r\nimport {Icon, H1} from \"@ui/atoms\";\r\nimport {MainTemplate} from \"@ui/templates\";\r\n\r\nexport const AuthTemplate: React.FC = ({children}) => (\r\n    <MainTemplate>\r\n        <Wrapper>\r\n            <Representation />\r\n\r\n            <FormBlock>{children}</FormBlock>\r\n        </Wrapper>\r\n    </MainTemplate>\r\n);\r\n\r\nconst Representation: React.FC = () => (\r\n    <Presentation>\r\n        <Col width=\"70%\" justify=\"space-between\">\r\n            <Row justify=\"center\">\r\n                <Icon name=\"logo\" />\r\n            </Row>\r\n\r\n            <Row>\r\n                <H1 align=\"center\">Get in touch with people much easier than ever</H1>\r\n            </Row>\r\n\r\n            <Row justify=\"center\">\r\n                <Icon name=\"rocket\" />\r\n            </Row>\r\n        </Col>\r\n    </Presentation>\r\n);\r\n\r\nconst Wrapper = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100vh;\r\n`;\r\n\r\nconst Presentation = styled.div`\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-basis: 50%;\r\n    background-color: ${({theme}) => theme.palette.secondary.light};\r\n    padding: 3% 0 15%;\r\n    \r\n    @media only screen and (max-width: ${({theme}) => theme.breakpoints.md}) {\r\n      display: none;\r\n    }\r\n`;\r\n\r\nconst FormBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex-basis: 50%;\r\n    background-color: ${({theme}) => theme.palette.primary.main};\r\n    padding: 3% 0 15%;\r\n    \r\n    @media only screen and (max-width: ${({theme}) => theme.breakpoints.md}) {\r\n      flex-basis: 100%;\r\n    }\r\n`;","import React from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nimport {Button} from \"@ui/atoms\";\r\n\r\ninterface AuthToggleButtonProps extends ToggleButtonProps {\r\n    to: string;\r\n}\r\n\r\nexport const AuthToggleButton: React.FC<AuthToggleButtonProps> = ({children, to, ...props}) => {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <ToggleButton {...props} onClick={() => history.push(to)}>\r\n            {children}\r\n        </ToggleButton>\r\n    );\r\n};\r\n\r\ninterface ToggleButtonProps {\r\n    active?: boolean;\r\n}\r\n\r\nconst ToggleButton = styled(Button)<ToggleButtonProps>`\r\n  ${({theme, active}) => css`\r\n    background-color: ${active && theme.palette.secondary.light};\r\n  `}\r\n    \r\n  &:first-child {\r\n     border-bottom-right-radius: 0;\r\n     border-top-right-radius: 0;\r\n     border-bottom-left-radius: 15px;\r\n     border-top-left-radius:15px;\r\n  }\r\n    \r\n  &:last-child {\r\n    border-bottom-right-radius: 15px;\r\n    border-top-right-radius: 15px;\r\n    border-bottom-left-radius: 0;\r\n    border-top-left-radius: 0; \r\n  }\r\n`;","import React, {ReactElement, useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport * as selectors from \"../selectors\";\r\nimport * as actions from \"../actions\";\r\n\r\nexport const CredentialsLoader: React.FC = ({children}) => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const isFetching = useSelector(selectors.areCredentialsFetching);\r\n  const isAuthenticated = useSelector(selectors.isAuthenticated);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) dispatch(actions.fetchCredentials());\r\n  }, []);\r\n\r\n  if (isFetching) return null;\r\n\r\n  return children as ReactElement;\r\n};","export const isEmpty = (value: any) => value === undefined || value === null;","export const scrollToBottom = (element: Element) =>\r\n  element.scrollTop = element.scrollHeight - element.clientHeight;\r\n\r\nexport const isAtTop = (element: Element) =>\r\n  element.scrollTop === 0;\r\n\r\nexport const isAtBottom = (element: Element) =>\r\n  element.scrollTop + element.clientHeight === element.scrollHeight;\r\n\r\nexport const INFINITE_SCROLL = 10000000000000;","export const isElementVisible = (element: Element) => {\r\n  const rect = element.getBoundingClientRect();\r\n\r\n  const viewHeight = Math.max(\r\n    document.documentElement.clientHeight,\r\n    window.innerHeight\r\n  );\r\n\r\n  return !(rect.bottom < 0 || rect.top - viewHeight >= 0);\r\n};","import React, {useEffect, useRef, useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {authSelectors} from \"@features/auth\";\r\nimport {Message, SystemMessage} from \"@features/chats\";\r\nimport {Col} from \"@lib/layout\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {isEmpty} from \"@lib/utils\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {scrollToBottom, isElementVisible, isAtBottom, isAtTop, INFINITE_SCROLL} from \"@lib/dom\";\r\nimport {H2} from \"@ui/atoms\";\r\nimport {DirectChatMessage} from \"../lib/typings\";\r\nimport * as actions from \"../actions\";\r\nimport * as selectors from \"../selectors\";\r\n\r\ninterface DirectMessagesListProps {\r\n  messages: DirectChatMessage[] | null;\r\n  areFetching: boolean;\r\n}\r\n\r\nexport const DirectMessagesList: React.FC<DirectMessagesListProps> = ({messages, areFetching}) => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n  const {partnerId} = useParams<{partnerId: ID}>();\r\n\r\n  const listRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const credentials = useSelector(authSelectors.credentials)!;\r\n  const scroll = useSelector(selectors.scroll(partnerId));\r\n  const areMessagesFetched = useSelector(selectors.areMessagesFetched(partnerId));\r\n  const areMessagesFetching = useSelector(selectors.areMessagesFetching(partnerId));\r\n  const areMessagesLeftToFetch = useSelector(selectors.areMessagesLeftToFetch(partnerId));\r\n\r\n  const last = messages && messages[messages.length - 1];\r\n\r\n  useEffect(() => {\r\n    if (!last) return;\r\n\r\n    const list = listRef.current!;\r\n\r\n    if (!isScrolled) {\r\n      if (!isEmpty(scroll)) list.scroll(0, scroll!);\r\n      else scrollToBottom(list);\r\n\r\n      handleReadingMessages(list);\r\n\r\n      return setIsScrolled(true);\r\n    }\r\n\r\n    const isOwn = ((!!last.sender && last.sender.id) === credentials.id);\r\n\r\n    if (isOwn || isAtBottom(list)) scrollToBottom(list);\r\n  }, [last]);\r\n\r\n  useEffect(() => {\r\n    if (isScrolled && !!scroll) listRef.current!.scroll(0, scroll);\r\n  }, [areMessagesFetched]);\r\n\r\n  const handleListScroll = ({currentTarget}: React.UIEvent<HTMLDivElement>) => {\r\n    dispatch(actions.setScroll({\r\n      partnerId, scroll: isAtBottom(currentTarget) ? INFINITE_SCROLL : currentTarget.scrollTop\r\n    }));\r\n\r\n    const toFetchMessages = isAtTop(currentTarget) && !areMessagesFetching && areMessagesLeftToFetch;\r\n\r\n    if (toFetchMessages) {\r\n      dispatch(actions.fetchMessages({\r\n        partnerId, partner: partnerId,\r\n        skip: messages ? messages.length : 0\r\n      }));\r\n    }\r\n\r\n    handleReadingMessages(currentTarget);\r\n  };\r\n\r\n  const handleReadingMessages = (list: Element) => {\r\n    const messages = [...list.children] as HTMLElement[];\r\n\r\n    const reversed = [...messages].reverse();\r\n    const unread = reversed.find((message) =>\r\n      message.dataset.isRead === \"false\" && message.dataset.isOwn === \"false\") || null;\r\n\r\n    if (!!unread) {\r\n      const isVisible = isElementVisible(unread);\r\n\r\n      if (isVisible) {\r\n        const id = unread.dataset.id as ID;\r\n\r\n        dispatch(actions.readMessage({\r\n          partnerId,\r\n          messageId: id\r\n        }));\r\n\r\n        const numberOfUnreadMessages = reversed.slice(0, reversed.indexOf(unread))\r\n          .filter((message) =>\r\n            message.dataset.isOwn === \"false\" &&\r\n            message.dataset.isRead === \"false\").length;\r\n\r\n        dispatch(actions.setNumberOfUnreadMessages({\r\n          partnerId, number: numberOfUnreadMessages\r\n        }));\r\n\r\n        dispatch(actions.fetchReadingMessage({\r\n          message: id,\r\n          partner: partnerId\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <List ref={listRef} onScroll={handleListScroll}>\r\n      {areFetching && <H2>Loading...</H2>}\r\n\r\n      {messages && messages.map(({id, images, files, audio, text, sender, isSystem, isRead, createdAt}) => {\r\n        if (isSystem) return (\r\n          <SystemMessage\r\n            key={id}\r\n            text={text}/>\r\n        );\r\n\r\n        const isOwn = (!!sender && sender.id) === credentials.id;\r\n\r\n        return (\r\n          <Message\r\n            key={id}\r\n            id={id}\r\n            text={text}\r\n            images={images}\r\n            audio={audio}\r\n            files={files}\r\n            avatar={sender!.avatar}\r\n            date={new Date(createdAt)}\r\n            isOwn={isOwn}\r\n            isRead={isRead}/>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n};\r\n\r\nconst List = styled(Col).attrs(() => ({\r\n  width: \"100%\",\r\n  padding: \"1rem 5rem\"\r\n}))`\r\n  flex: 1;\r\n  overflow: auto;\r\n`;\r\n","import React, {useState} from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const useModal = () => {\r\n  const [isModalOpen, setIsOpen] = useState(false);\r\n\r\n  const openModal = () => setIsOpen(true);\r\n  const closeModal = () => setIsOpen(false);\r\n\r\n  return {isModalOpen, openModal, closeModal};\r\n};\r\n\r\nexport interface ModalProps {\r\n  closeModal: () => void;\r\n}\r\n\r\nexport const Modal: React.FC<ModalProps> = ({children, closeModal}) => (\r\n  <>\r\n    <ModalBackground onClick={closeModal}/>\r\n    <Wrapper>{children}</Wrapper>\r\n  </>\r\n);\r\n\r\nconst ModalBackground = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(25, 25, 25, 0.7);\r\n  z-index: 1000;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1001;\r\n`;","import React, {useEffect, useState} from \"react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport prettyBytes from \"pretty-bytes\";\r\n\r\nimport {AttachmentType} from \"@features/chats\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {Modal, ModalProps} from \"@lib/modal\";\r\nimport {Icon, Text} from \"@ui/atoms\";\r\nimport * as actions from \"../actions\";\r\nimport * as selectors from \"../selectors\";\r\n\r\nexport const DirectAttachmentsModal: React.FC<ModalProps> = ({closeModal}) => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const [tab, useTab] = useState<AttachmentType>(\"images\");\r\n\r\n  const {partnerId} = useParams<{partnerId: ID}>();\r\n\r\n  const files = useSelector(selectors.files(partnerId));\r\n  const areFilesFetching = useSelector(selectors.areFilesFetching(partnerId));\r\n\r\n  const images = useSelector(selectors.images(partnerId));\r\n  const areImagesFetching = useSelector(selectors.areImagesFetching(partnerId));\r\n\r\n  const audios = useSelector(selectors.audios(partnerId));\r\n  const areAudiosFetching = useSelector(selectors.areAudiosFetching(partnerId));\r\n\r\n  useEffect(() => {\r\n    if (tab === \"images\") {\r\n      if (!areImagesFetching) {\r\n        dispatch(actions.fetchImages({\r\n          partnerId, partner: partnerId\r\n        }));\r\n      }\r\n    } else if (tab === \"files\") {\r\n      if (!areFilesFetching) {\r\n        dispatch(actions.fetchFiles({\r\n          partnerId, partner: partnerId\r\n        }));\r\n      }\r\n    } else if (tab === \"audios\") {\r\n      if (!areAudiosFetching) {\r\n        dispatch(actions.fetchAudios({\r\n          partnerId, partner: partnerId\r\n        }));\r\n      }\r\n    }\r\n  }, [tab]);\r\n\r\n  const sortedImages = [...images].sort((a, b) => +new Date(a.createdAt) - +new Date(b.createdAt));\r\n  const sortedFiles = [...files].sort((a, b) => +new Date(a.createdAt) - +new Date(b.createdAt));\r\n  const sortedAudios = [...audios].sort((a, b) => +new Date(a.createdAt) - +new Date(b.createdAt));\r\n\r\n  return (\r\n    <Modal closeModal={closeModal}>\r\n      <Wrapper>\r\n        <Header>\r\n          <Row gap=\"2rem\">\r\n            <Text clickable onClick={() => useTab(\"images\")}>Images</Text>\r\n            <Text clickable onClick={() => useTab(\"audios\")}>Audios</Text>\r\n            <Text clickable onClick={() => useTab(\"files\")}>Files</Text>\r\n          </Row>\r\n\r\n          <Icon\r\n            onClick={closeModal}\r\n            name=\"cross\"\r\n            pointer/>\r\n        </Header>\r\n\r\n        <Content>\r\n          {tab === \"images\" ? (\r\n            <Row gap=\"1rem\" wrap=\"wrap\">\r\n              {sortedImages.map(({id, url}) => (\r\n                <img key={id} src={url} alt=\"attachment\"/>\r\n              ))}\r\n            </Row>\r\n          ) : tab === \"files\" ? (\r\n            <Col gap=\"1.5rem\">\r\n              {sortedFiles.map(({id, file: {url, name, size}}) => (\r\n                <a key={id} href={url} target=\"_blank\" rel=\"noreferrer\">\r\n                  <Row align=\"center\" gap=\"1.5rem\">\r\n                    <Icon name=\"document\"/>\r\n\r\n                    <Col justify=\"space-between\" width=\"20rem\">\r\n                      <Text ellipsis>{name}</Text>\r\n                      <Text ellipsis>{prettyBytes(size)}</Text>\r\n                    </Col>\r\n                  </Row>\r\n                </a>\r\n              ))}\r\n            </Col>\r\n          ) : tab === \"audios\" ? (\r\n              <Col gap=\"1.5rem\">{sortedAudios.map(({id, url}) => (\r\n                <audio controls key={id}>\r\n                  <source src={url}/>\r\n                </audio>\r\n              ))}</Col>\r\n            ) : null}\r\n        </Content>\r\n      </Wrapper>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled(Col).attrs(() => ({\r\n  width: \"85rem\"\r\n}))`\r\n  max-height: 75vh;\r\n`;\r\n\r\nconst Header = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  justify: \"space-between\",\r\n  padding: \"2rem\"\r\n}))`\r\n  background-color: ${({theme}) => theme.palette.primary.main};\r\n`;\r\n\r\nconst Content = styled.div`\r\n  width: 100%;\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  overflow: auto;\r\n  padding: 2rem;\r\n`;","import {GroupChat, GroupChatMessage, GroupChatsListItem, GroupChatDetails} from \"@features/groups\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {socket} from \"@lib/websockets\";\r\nimport {AttachedFile, AttachedAudio, AttachedImage} from \"@features/chats\";\r\n\r\nexport interface GetChatsResponse {\r\n  chats: GroupChatsListItem[];\r\n}\r\n\r\nconst getChats = (): Promise<{data: GetChatsResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_CHATS\", null, (data: GetChatsResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetChatData {\r\n  group: ID;\r\n}\r\n\r\nexport interface GetChatResponse {\r\n  chat: GroupChat;\r\n}\r\n\r\nconst getChat = (data: GetChatData): Promise<{data: GetChatResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_CHAT\", data, (data: GetChatResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetChatMessagesData {\r\n  group: ID;\r\n  skip?: number;\r\n}\r\n\r\nexport interface GetChatMessagesResponse {\r\n  messages: GroupChatMessage[];\r\n}\r\n\r\nconst getMessages = (data: GetChatMessagesData): Promise<{data: GetChatMessagesResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_MESSAGES\", data, (data: GetChatMessagesResponse) => resolve({data}));\r\n});\r\n\r\nexport interface SendMessageData {\r\n  text?: string | null;\r\n  audio?: ID | null;\r\n  images?: ID[] | null;\r\n  files?: ID[] | null;\r\n  parent?: ID | null;\r\n  group: ID;\r\n}\r\n\r\nexport interface SendMessageResponse {\r\n  message: GroupChatMessage;\r\n}\r\n\r\nconst sendMessage = (data: SendMessageData): Promise<{data: SendMessageResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:CREATE_MESSAGE\", data, (data: SendMessageResponse) => resolve({data}));\r\n});\r\n\r\nexport interface ReadMessageData {\r\n  group: ID;\r\n  message: ID;\r\n}\r\n\r\nexport interface ReadMessageResponse {\r\n  message: GroupChatMessage;\r\n  chat: GroupChatDetails;\r\n}\r\n\r\nconst readMessage = (data: ReadMessageData): Promise<{data: ReadMessageResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:READ_MESSAGE\", data, (data: ReadMessageResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetAudiosData {\r\n  group: ID;\r\n  skip?: number;\r\n}\r\n\r\nexport interface GetAudiosResponse {\r\n  audios: AttachedAudio[];\r\n}\r\n\r\nconst getAudios = (data: GetAudiosData): Promise<{data: GetAudiosResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_AUDIOS\", data, (data: GetAudiosResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetImagesData {\r\n  group: ID;\r\n  skip?: number;\r\n}\r\n\r\nexport interface GetImagesResponse {\r\n  images: AttachedImage[];\r\n}\r\n\r\nconst getImages = (data: GetImagesData): Promise<{data: GetImagesResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_IMAGES\", data, (data: GetImagesResponse) => resolve({data}));\r\n});\r\n\r\nexport interface GetFilesData {\r\n  group: ID;\r\n  skip?: number;\r\n}\r\n\r\nexport interface GetFilesResponse {\r\n  files: AttachedFile[];\r\n}\r\n\r\nconst getFiles = (data: GetFilesData): Promise<{data: GetFilesResponse}> => new Promise((resolve) => {\r\n  socket.emit(\"GROUP_CHAT:GET_FILES\", data, (data: GetFilesResponse) => resolve({data}));\r\n});\r\n\r\nexport const groupChatsApi = {\r\n  getChats, getChat, getMessages,\r\n  sendMessage, readMessage, getAudios,\r\n  getImages, getFiles\r\n};\r\n\r\n","import {createAction, createAsyncThunk} from \"@reduxjs/toolkit\";\r\n\r\nimport {ID} from \"@lib/typings\";\r\nimport {\r\n  groupChatsApi,\r\n  GetChatsResponse,\r\n  GetChatResponse,\r\n  GetChatData,\r\n  GetChatMessagesData,\r\n  GetChatMessagesResponse,\r\n  SendMessageResponse, SendMessageData, ReadMessageData, ReadMessageResponse\r\n} from \"@api/group-chats.api\";\r\nimport {GroupChatMessage} from \"./lib/typings\";\r\n\r\nconst type = \"groups\";\r\n\r\nexport interface FetchChatsPayload extends GetChatsResponse {\r\n\r\n}\r\n\r\nexport const fetchChats = createAsyncThunk<GetChatsResponse, void>(`${type}/fetchChats`, async () => {\r\n  const {data} = await groupChatsApi.getChats();\r\n\r\n  return data;\r\n});\r\n\r\nexport interface FetchChatPayload extends GetChatResponse {\r\n}\r\n\r\nexport interface FetchChatData extends GetChatData {\r\n  groupId: ID;\r\n}\r\n\r\nexport const fetchChat = createAsyncThunk<FetchChatPayload, FetchChatData>(`${type}/fetchChat`, async (args) => {\r\n  const {data} = await groupChatsApi.getChat(args);\r\n\r\n  return data;\r\n});\r\n\r\nexport interface FetchMessagesPayload extends GetChatMessagesResponse {\r\n}\r\n\r\nexport interface FetchMessagesData extends GetChatMessagesData {\r\n  groupId: ID;\r\n}\r\n\r\nexport const fetchMessages = createAsyncThunk<FetchMessagesPayload, FetchMessagesData>(`${type}/fetchMessages`, async (args) => {\r\n  const {data} = await groupChatsApi.getMessages(args);\r\n\r\n  return data;\r\n});\r\n\r\nexport interface FetchSendingMessagePayload extends SendMessageResponse {\r\n}\r\n\r\nexport interface FetchSendingMessageData extends SendMessageData {\r\n}\r\n\r\nexport const fetchSendingMessage = createAsyncThunk<FetchSendingMessagePayload, FetchSendingMessageData>(`${type}/fetchSendingMessage`, async (args) => {\r\n  const {data} = await groupChatsApi.sendMessage(args);\r\n\r\n  return data;\r\n});\r\n\r\nexport interface FetchReadingMessageData extends ReadMessageData {\r\n}\r\n\r\nexport interface FetchReadingMessagePayload extends ReadMessageResponse {\r\n}\r\n\r\nexport const fetchReadingMessage = createAsyncThunk<FetchReadingMessagePayload, FetchReadingMessageData>(`${type}/fetchReadingMessage`,\r\n  async (args) => {\r\n    const {data} = await groupChatsApi.readMessage(args);\r\n\r\n    return data;\r\n  });\r\n\r\nexport interface SetScrollPayload {\r\n  groupId: ID;\r\n  scroll: number;\r\n}\r\n\r\nexport const setScroll = createAction<SetScrollPayload>(`${type}/setScroll`);\r\n\r\nexport interface AddMessagePayload {\r\n  message: GroupChatMessage;\r\n  groupId: ID;\r\n  isOwn: boolean;\r\n}\r\n\r\nexport const addMessage = createAction<AddMessagePayload>(`${type}/addMessage`);\r\n\r\nexport interface UpdateMessagePayload {\r\n  groupId: ID;\r\n  messageId: ID;\r\n  partial: Partial<GroupChatMessage>;\r\n}\r\n\r\nexport const updateMessage = createAction<UpdateMessagePayload>(`${type}/updateMessage`);\r\n\r\nexport interface ReadMessagePayload {\r\n  groupId: ID;\r\n  messageId: ID;\r\n}\r\n\r\nexport const readMessage = createAction<ReadMessagePayload>(`${type}/readMessage`);\r\n\r\nexport interface SetNumberOfUnreadMessagesPayload {\r\n  groupId: ID;\r\n  number: number;\r\n}\r\n\r\nexport const setNumberOfUnreadMessages = createAction<SetNumberOfUnreadMessagesPayload>(`${type}/setNumberOfUnreadMessages`);","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\n\nimport {GroupChatMessage, GroupChat, GroupChatsListItem} from \"./lib/typings\";\nimport {\n  AddMessagePayload,\n  FetchChatData,\n  FetchChatPayload,\n  FetchMessagesData,\n  FetchMessagesPayload, ReadMessagePayload, SetNumberOfUnreadMessagesPayload,\n  SetScrollPayload, UpdateMessagePayload, FetchChatsPayload\n} from \"./actions\";\nimport * as actions from \"./actions\";\nimport {AttachedAudio, AttachedFile, AttachedImage} from \"@features/chats\";\nimport {\n  FetchAudiosData,\n  FetchAudiosPayload,\n  FetchFilesData, FetchFilesPayload,\n  FetchImagesData,\n  FetchImagesPayload\n} from \"@features/directs/actions\";\n\ninterface GroupsState {\n  list: GroupChatsListItem[] | null;\n  areChatsFetching: boolean;\n  chats: {\n    [key: string]: {\n      messages: GroupChatMessage[];\n      chat: GroupChat | null;\n      isFetching: boolean;\n      areMessagesFetching: boolean;\n      areMessagesFetched: boolean;\n      areMessagesLeftToFetch: boolean;\n      scroll: number;\n      images: AttachedImage[];\n      areImagesFetching: boolean;\n      files: AttachedFile[];\n      areFilesFetching: boolean;\n      audios: AttachedAudio[];\n      areAudiosFetching: boolean;\n    };\n  };\n}\n\nexport const reducer = createReducer<GroupsState>({\n  chats: {},\n  areChatsFetching: false,\n  list: null\n}, {\n  [actions.fetchChats.pending.type]: (state) => {\n    state.areChatsFetching = true;\n  },\n\n  [actions.fetchChats.fulfilled.type]: (state, {payload}: PayloadAction<FetchChatsPayload>) => {\n    state.list = payload.chats;\n    state.areChatsFetching = false;\n  },\n\n  [actions.fetchChats.rejected.type]: (state) => {\n    state.areChatsFetching = false;\n  },\n\n  [actions.fetchChat.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat, isFetching: true\n    };\n  },\n\n  [actions.fetchChat.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchChatPayload, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat,\n      chat: payload.chat,\n      isFetching: false\n    };\n  },\n\n  [actions.fetchChat.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchChatData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat, isFetching: false\n    };\n  },\n\n  [actions.fetchMessages.pending.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat, areMessagesFetching: true\n    };\n  },\n\n  [actions.fetchMessages.fulfilled.type]: (state, {payload, meta: {arg}}: PayloadAction<FetchMessagesPayload, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat,\n      areMessagesFetching: false,\n      areMessagesFetched: true,\n      areMessagesLeftToFetch: !!payload.messages.length,\n      messages: chat.messages ? [...payload.messages, ...chat.messages]\n        : payload.messages\n    };\n  },\n\n  [actions.fetchMessages.rejected.type]: (state, {meta: {arg}}: PayloadAction<void, string, {arg: FetchMessagesData}>) => {\n    const chat = state.chats[arg.groupId] || {};\n\n    state.chats[arg.groupId] = {\n      ...chat, areMessagesFetching: false\n    };\n  },\n\n  [actions.readMessage.type]: (state, {payload}: PayloadAction<ReadMessagePayload>) => {\n    const chat = state.chats[payload.groupId] || {};\n\n    const idx = chat.messages && chat.messages\n      .findIndex((message) => message.id === payload.messageId);\n\n    state.chats[payload.groupId] = {\n      ...chat,\n      messages: chat.messages && chat.messages\n        .map((message, index) => idx >= index ? ({...message, isRead: true}) : message)\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.id === payload.groupId &&\n        (chat.lastMessage && chat.lastMessage.id) === payload.messageId;\n\n      if (isCurrent) return ({\n        ...chat, lastMessage: {\n          ...chat.lastMessage!, isRead: true\n        }\n      });\n\n      return chat;\n    });\n  },\n\n  [actions.addMessage.type]: (state, {payload}: PayloadAction<AddMessagePayload>) => {\n    const chat = state.chats[payload.groupId] || {};\n\n    state.chats[payload.groupId] = {\n      ...chat, messages: chat.messages ? [...chat.messages, payload.message]\n        : [payload.message]\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.id === payload.groupId;\n\n      if (isCurrent) {\n        const numberOfUnreadMessages = payload.isOwn ? chat.numberOfUnreadMessages :\n          (chat.numberOfUnreadMessages ? chat.numberOfUnreadMessages + 1 : 1);\n\n        return {\n          ...chat,\n          lastMessage: payload.message,\n          numberOfUnreadMessages\n        };\n      }\n\n      return chat;\n    });\n  },\n\n  [actions.setScroll.type]: (state, {payload}: PayloadAction<SetScrollPayload>) => {\n    const chat = state.chats[payload.groupId] || {};\n\n    state.chats[payload.groupId] = {\n      ...chat, scroll: payload.scroll\n    };\n  },\n\n  [actions.updateMessage.type]: (state, {payload}: PayloadAction<UpdateMessagePayload>) => {\n    const chat = state.chats[payload.groupId] || {};\n\n    state.chats[payload.groupId] = {\n      ...chat, messages: chat.messages &&\n        chat.messages.map((message) => message.id === payload.messageId ?\n          ({...message, ...payload.partial}) : message)\n    };\n\n    state.list = state.list && state.list.map((chat) => {\n      const isCurrent = chat.id === payload.groupId &&\n        (chat.lastMessage && chat.lastMessage.id) === payload.messageId;\n\n      if (isCurrent) return {\n        ...chat,\n        lastMessage: {\n          ...chat.lastMessage!,\n          ...payload.partial\n        }\n      };\n\n      return chat;\n    });\n  },\n\n  [actions.setNumberOfUnreadMessages.type]: (state, {payload}: PayloadAction<SetNumberOfUnreadMessagesPayload>) => {\n    state.list = state.list && state.list\n      .map((chat) => chat.id === payload.groupId ?\n        ({...chat, numberOfUnreadMessages: payload.number}) : chat);\n  }\n});","import {ID, RootState} from \"@lib/typings\";\r\n\r\nconst groupsSelector = (state: RootState) => state.groups;\r\n\r\nexport const chats = (state: RootState) => groupsSelector(state).list;\r\nexport const areChatsFetching = (state: RootState) => groupsSelector(state).areChatsFetching;\r\n\r\nexport const chat = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId] || null;\r\n\r\n  return chat && chat.chat;\r\n};\r\n\r\nexport const messages = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId] || null;\r\n\r\n  return chat && chat.messages;\r\n};\r\n\r\nexport const isChatFetching = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId];\r\n\r\n  return !!chat && chat.isFetching;\r\n};\r\n\r\nexport const areMessagesFetching = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId];\r\n\r\n  return !!chat && chat.areMessagesFetching;\r\n};\r\n\r\nexport const scroll = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId] || null;\r\n\r\n  return chat && chat.scroll;\r\n};\r\n\r\nexport const areMessagesFetched = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId];\r\n\r\n  return !!chat && !!chat.areMessagesFetched;\r\n};\r\n\r\nexport const areMessagesLeftToFetch = (groupId: ID) => (state: RootState) => {\r\n  const chat = groupsSelector(state).chats[groupId];\r\n\r\n  return !!chat && !!chat.areMessagesLeftToFetch;\r\n};","import React, {useEffect, useRef, useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useParams} from \"react-router-dom\";\r\n\r\nimport {authSelectors} from \"@features/auth\";\r\nimport {Message, SystemMessage} from \"@features/chats\";\r\nimport {Col} from \"@lib/layout\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {isEmpty} from \"@lib/utils\";\r\nimport {isElementVisible, scrollToBottom, isAtBottom, isAtTop, INFINITE_SCROLL} from \"@lib/dom\";\r\nimport {H2} from \"@ui/atoms\";\r\nimport {GroupChatMessage} from \"../lib/typings\";\r\nimport * as actions from \"../actions\";\r\nimport * as selectors from \"../selectors\";\r\n\r\ninterface GroupMessagesListProps {\r\n  messages: GroupChatMessage[] | null;\r\n  areFetching: boolean;\r\n}\r\n\r\nexport const GroupMessagesList: React.FC<GroupMessagesListProps> = ({messages, areFetching}) => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n  const {groupId} = useParams<{groupId: ID}>();\r\n\r\n  const listRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const credentials = useSelector(authSelectors.credentials)!;\r\n  const scroll = useSelector(selectors.scroll(groupId));\r\n  const areMessagesFetched = useSelector(selectors.areMessagesFetched(groupId));\r\n  const areMessagesFetching = useSelector(selectors.areMessagesFetching(groupId));\r\n  const areMessagesLeftToFetch = useSelector(selectors.areMessagesLeftToFetch(groupId));\r\n\r\n  const last = messages && messages[messages.length - 1];\r\n\r\n  useEffect(() => {\r\n    if (!last) return;\r\n\r\n    const list = listRef.current!;\r\n\r\n    if (!isScrolled) {\r\n      if (!isEmpty(scroll)) list.scroll(0, scroll);\r\n      else scrollToBottom(list);\r\n\r\n      handleReadingMessages(list);\r\n\r\n      return setIsScrolled(true);\r\n    }\r\n\r\n    const isOwn = ((!!last.sender && last.sender.id) === credentials.id);\r\n\r\n    if (isOwn || isAtBottom(list)) scrollToBottom(list);\r\n  }, [last]);\r\n\r\n  useEffect(() => {\r\n    if (isScrolled) listRef.current!.scroll(0, scroll);\r\n  }, [areMessagesFetched]);\r\n\r\n  const handleListScroll = ({currentTarget}: React.UIEvent<HTMLDivElement>) => {\r\n    dispatch(actions.setScroll({\r\n      groupId, scroll: isAtBottom(currentTarget) ? INFINITE_SCROLL : currentTarget.scrollTop\r\n    }));\r\n\r\n    const toFetchMessages = isAtTop(currentTarget) && !areMessagesFetching && areMessagesLeftToFetch;\r\n\r\n    if (toFetchMessages) {\r\n      dispatch(actions.fetchMessages({\r\n        groupId, group: groupId,\r\n        skip: messages ? messages.length : 0\r\n      }))\r\n    }\r\n\r\n    handleReadingMessages(currentTarget);\r\n  };\r\n\r\n  const handleReadingMessages = (list: Element) => {\r\n    const messages = [...list.children] as HTMLElement[];\r\n\r\n    const reversed = [...messages].reverse();\r\n    const unread = reversed.find((message) =>\r\n      message.dataset.isRead === \"false\" && message.dataset.isOwn === \"false\") || null;\r\n\r\n    if (!!unread) {\r\n      const isVisible = isElementVisible(unread);\r\n\r\n      if (isVisible) {\r\n        const id = unread.dataset.id as ID;\r\n\r\n        dispatch(actions.readMessage({\r\n          groupId, messageId: id\r\n        }));\r\n\r\n        const numberOfUnreadMessages = reversed.slice(0, reversed.indexOf(unread))\r\n          .filter((message) =>\r\n            message.dataset.isOwn === \"false\" &&\r\n            message.dataset.isRead === \"false\").length;\r\n\r\n        dispatch(actions.setNumberOfUnreadMessages({\r\n          groupId, number: numberOfUnreadMessages\r\n        }));\r\n\r\n        dispatch(actions.fetchReadingMessage({\r\n          message: id,\r\n          group: groupId\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <List ref={listRef} onScroll={handleListScroll}>\r\n      {areFetching && <H2>Loading...</H2>}\r\n\r\n      {messages && messages.map(({id, images, files, audio, text, sender, isSystem, isRead, createdAt}) => {\r\n        if (isSystem) return (\r\n          <SystemMessage\r\n            key={id}\r\n            text={text}/>\r\n        );\r\n\r\n        const isOwn = (!!sender && sender.id) === credentials.id;\r\n\r\n        return (\r\n          <Message\r\n            key={id}\r\n            id={id}\r\n            text={text}\r\n            images={images}\r\n            audio={audio}\r\n            files={files}\r\n            avatar={sender!.avatar}\r\n            date={new Date(createdAt)}\r\n            isOwn={isOwn}\r\n            isRead={isRead}/>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n};\r\n\r\nconst List = styled(Col).attrs(() => ({\r\n  width: \"100%\",\r\n  padding: \"1rem 5rem\"\r\n}))`\r\n  flex: 1;\r\n  overflow: auto;\r\n`;\r\n","import {AxiosPromise} from \"axios\";\r\n\r\nimport {User} from \"@features/users\";\r\nimport {request} from \"@lib/http\";\r\n\r\nexport interface SearchUsersData {\r\n  query: string;\r\n}\r\n\r\nexport interface SearchUsersResponse {\r\n  users: User[];\r\n}\r\n\r\nconst searchUsers = (data: SearchUsersData): AxiosPromise<SearchUsersResponse> => request({\r\n  url: \"/v1/api/users/search\",\r\n  method: \"GET\",\r\n  params: data\r\n});\r\n\r\nexport const usersApi = {\r\n  searchUsers\r\n};","import {createAsyncThunk} from \"@reduxjs/toolkit\";\r\n\r\nimport {SearchUsersResponse, SearchUsersData, usersApi} from \"@api/users.api\";\r\n\r\nconst type = \"users\";\r\n\r\nexport interface FetchSearchingUsersData extends SearchUsersData {\r\n}\r\n\r\nexport interface FetchSearchingUsersPayload extends SearchUsersResponse {\r\n}\r\n\r\nexport const fetchSearchingUsers = createAsyncThunk<FetchSearchingUsersPayload, FetchSearchingUsersData>(`${type}/fetchUsers`,\r\n  async (args) => {\r\n    const {data} = await usersApi.searchUsers(args);\r\n\r\n    return data;\r\n  });","import {RootState} from \"@lib/typings\";\r\n\r\nconst usersState = (state: RootState) => state.users;\r\n\r\nexport const searched = (state: RootState) => usersState(state).searched;","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nimport {User} from \"@features/users\";\r\nimport * as actions from \"./actions\";\r\nimport {FetchSearchingUsersPayload} from \"./actions\";\r\n\r\ninterface UsersState {\r\n  searched: User[] | null;\r\n  areSearchingFetching: boolean;\r\n}\r\n\r\nexport const reducer = createReducer<UsersState>(\r\n  {\r\n    searched: null,\r\n    areSearchingFetching: false\r\n  },\r\n  {\r\n    [actions.fetchSearchingUsers.pending.type]: (state) => {\r\n      state.areSearchingFetching = true;\r\n    },\r\n\r\n    [actions.fetchSearchingUsers.fulfilled.type]: (state, {payload}: PayloadAction<FetchSearchingUsersPayload>) => {\r\n      state.searched = payload.users;\r\n      state.areSearchingFetching = false;\r\n    },\r\n\r\n    [actions.fetchSearchingUsers.rejected.type]: (state) => {\r\n      state.areSearchingFetching = false;\r\n    },\r\n  }\r\n);","import React from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\n\r\ninterface AvatarProps {\r\n  url: string;\r\n  small?: boolean;\r\n}\r\n\r\nexport const Avatar: React.FC<AvatarProps> = ({url, small}) => (\r\n  <Wrapper small={small}>\r\n    <Image src={url} alt=\"avatar\"/>\r\n  </Wrapper>\r\n);\r\n\r\ninterface AvatarWrapperProps {\r\n  small?: boolean;\r\n}\r\n\r\nconst Wrapper = styled.div<AvatarWrapperProps>`\r\n  width: 7rem;\r\n  height: 7rem;\r\n  \r\n  ${({small}) => small && css`\r\n    width: 4rem;\r\n    height: 4rem;\r\n  `}\r\n`;\r\n\r\nconst Image = styled.img`\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n`;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {Row} from \"@lib/layout\";\r\n\r\ninterface ProgressBarProps {\r\n  progress: number;\r\n}\r\n\r\nexport const ProgressBar: React.FC<ProgressBarProps> = ({progress}) => (\r\n  <Wrapper>\r\n    <Bar progress={progress} />\r\n  </Wrapper>\r\n);\r\n\r\nconst Wrapper = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  height: \"2rem\",\r\n  padding: \"0 1rem\",\r\n  align: \"center\"\r\n}))`\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 10rem;\r\n`;\r\n\r\ninterface BarProps {\r\n  progress: number;\r\n}\r\n\r\nconst Bar = styled.div<BarProps>`\r\n  width: ${({progress}) => `${progress * 100}%`};\r\n  height: 1rem;\r\n  box-shadow: 0 1rem 4rem -1rem #FFFFFF;\r\n  border-radius: 10rem;\r\n  background: #FFFFFF;\r\n`;","import format from \"date-fns/format\";\r\n\r\nexport const formatMessageDate = (date: Date): string => {\r\n  const days = Math.ceil((Date.now() - +date) / (1000 * 60 * 60 * 24));\r\n  const scheme = days >= 3 ? \"dd.MM.yyyy\" : \"HH:mm\";\r\n\r\n  return format(date, scheme);\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport {chatsSelectors} from \"@features/chats\";\r\nimport {directsSelectors, mapDirectToChat} from \"@features/directs\";\r\nimport {groupsSelectors, mapGroupToChat} from \"@features/groups\";\r\nimport {authSelectors} from \"@features/auth\";\r\nimport {usersSelectors} from \"@features/users\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {Text, Circle, H3, H5} from \"@ui/atoms\";\r\nimport {Avatar} from \"@ui/molecules\";\r\nimport {formatMessageDate} from \"../lib/formatting\";\r\nimport {ChatsListItem} from \"../lib/typings\";\r\n\r\nexport const ChatsList: React.FC = () => {\r\n  const credentials = useSelector(authSelectors.credentials)!;\r\n  const directs = useSelector(directsSelectors.chats);\r\n  const groups = useSelector(groupsSelectors.chats);\r\n  const areDirectsFetching = useSelector(directsSelectors.areChatsFetching);\r\n  const areGroupsFetching = useSelector(groupsSelectors.areChatsFetching);\r\n  const searching = useSelector(chatsSelectors.search);\r\n  const searched = useSelector(usersSelectors.searched);\r\n\r\n  const isFetching = areDirectsFetching || areGroupsFetching;\r\n\r\n  if (isFetching) return (\r\n    <List>\r\n      <H3>Loading...</H3>\r\n    </List>\r\n  );\r\n\r\n  const chats: ChatsListItem[] = [];\r\n\r\n  directs && chats.push(...directs.map((direct) => {\r\n    const chat = mapDirectToChat(direct);\r\n\r\n    const lastMessage = direct.lastMessage;\r\n    const isOwn = (lastMessage && lastMessage.sender) && (lastMessage.sender.id === credentials.id);\r\n\r\n    const prefix = isOwn ? \"You: \" : \"\";\r\n\r\n    chat.message = lastMessage && `${prefix}${chat.message}`;\r\n\r\n    return chat;\r\n  }));\r\n\r\n  groups && chats.push(...groups.map((group) => {\r\n    const chat = mapGroupToChat(group);\r\n\r\n    const lastMessage = group.lastMessage;\r\n    const isOwn = (lastMessage && lastMessage.sender) && (lastMessage.sender.id === credentials.id);\r\n\r\n    const prefix = isOwn ? \"You: \" : \"\";\r\n\r\n    chat.message = lastMessage && `${prefix}${chat.message}`;\r\n\r\n    return chat;\r\n  }));\r\n\r\n  const filteredSearched = (directs && searched) && searched.filter(({id}) =>\r\n    directs.findIndex(({partner}) => partner.id === id) === -1);\r\n\r\n  return (\r\n    <List>\r\n      <Col width=\"100%\" gap=\"2rem\">\r\n        {[...chats]\r\n          .filter(({name}) => name.toLowerCase().startsWith(searching.toLowerCase()))\r\n          .map((props) => (\r\n            <ListItem key={props.id} {...props}/>\r\n          ))}\r\n      </Col>\r\n\r\n      {filteredSearched && (\r\n        <SearchList gap=\"2rem\">\r\n          {filteredSearched.length === 0 ? (\r\n            <Row\r\n              width=\"100%\"\r\n              justify=\"center\"\r\n              align=\"center\">\r\n              <H5>No users found</H5>\r\n            </Row>\r\n          ) : filteredSearched.map(({id, username, avatar}) => (\r\n            <ListItem\r\n              key={id}\r\n              name={username}\r\n              avatar={avatar}\r\n              message={null}\r\n              date={null}\r\n              unreadMessages={0}\r\n              link={`/direct/${id}`}\r\n            />\r\n          ))}\r\n        </SearchList>\r\n      )}\r\n    </List>\r\n  );\r\n};\r\n\r\nconst List = styled(Col).attrs(() => ({\r\n  gap: \"1rem\",\r\n  width: \"100%\",\r\n  height: \"100%\"\r\n}))`\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst SearchList = styled(Col).attrs(() => ({\r\n  width: \"100%\"\r\n}))`\r\n  border-top: 2px solid ${({theme}) => theme.palette.divider};\r\n  padding-top: 1rem;\r\n`;\r\n\r\ninterface ListItemProps {\r\n  avatar: string;\r\n  name: string;\r\n  message: string | null;\r\n  date: Date | null;\r\n  unreadMessages: number;\r\n  link: string;\r\n}\r\n\r\nconst ListItem: React.FC<ListItemProps> = ({avatar, name, message, date, unreadMessages, link}) => (\r\n  <Link to={link}>\r\n    <Wrapper>\r\n      <Avatar url={avatar}/>\r\n\r\n      <Col width=\"80%\" height=\"100%\" justify=\"space-between\" padding=\"1rem 0\">\r\n        <Row width=\"100%\" justify=\"space-between\" align=\"center\">\r\n          <Text width=\"70%\" ellipsis>{name}</Text>\r\n          {date && <DateText secondary small>{formatMessageDate(date)}</DateText>}\r\n        </Row>\r\n\r\n        <Row width=\"100%\" justify=\"space-between\" align=\"center\">\r\n          {message && <Message>{message}</Message>}\r\n          {!!unreadMessages ? <UnreadMessages>{unreadMessages}</UnreadMessages> : null}\r\n        </Row>\r\n      </Col>\r\n    </Wrapper>\r\n  </Link>\r\n);\r\n\r\nconst Wrapper = styled(Row).attrs(() => ({\r\n  align: \"center\",\r\n  justify: \"space-between\",\r\n  height: \"100%\",\r\n  padding: \"2rem\"\r\n}))`\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst DateText = styled(Text)`\r\n  margin-left: 1rem;\r\n`;\r\n\r\nconst Message = styled(Text).attrs(() => ({\r\n  width: \"85%\",\r\n  ellipsis: true,\r\n  secondary: true\r\n}))`\r\n  font-size: 1.4rem;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst UnreadMessages = styled(Circle)`\r\n  font-size: 1rem;\r\n  margin-left: 1rem;\r\n`;","import {ChatsListItem} from \"@features/chats\"\r\nimport {DirectChatsListItem} from \"./typings\";\r\n\r\nexport const mapDirectToChat = ({id, lastMessage, partner, numberOfUnreadMessages}: DirectChatsListItem): ChatsListItem => ({\r\n  id, name: partner.username,\r\n  avatar: partner.avatar,\r\n  message: lastMessage && `${lastMessage.text || \"Attachments\"}`,\r\n  date: lastMessage && new Date(lastMessage.createdAt),\r\n  unreadMessages: numberOfUnreadMessages,\r\n  link: `/direct/${partner.id}`\r\n});","import {ChatsListItem} from \"@features/chats\";\r\nimport {GroupChatsListItem} from \"./typings\";\r\n\r\nexport const mapGroupToChat = ({id, title, avatar, lastMessage, numberOfUnreadMessages}: GroupChatsListItem): ChatsListItem => ({\r\n  id, avatar,\r\n  name: title,\r\n  message: lastMessage && `${lastMessage.text || \"Attachments\"}`,\r\n  date: lastMessage && new Date(lastMessage.createdAt),\r\n  unreadMessages: numberOfUnreadMessages,\r\n  link: `/group/${id}`\r\n});","import intervalToDuration from \"date-fns/intervalToDuration\";\r\n\r\nexport const formatDuration = (duration: number): string => {\r\n  const normalize = (time: string): string =>\r\n    time.length === 1 ? `0${time}` : time;\r\n\r\n  const {hours, minutes, seconds} = intervalToDuration({\r\n    start: 0, end: duration\r\n  });\r\n\r\n  const hoursOutput = hours ? `${normalize(String(hours))}:` : \"\";\r\n\r\n  return `${hoursOutput}${normalize(String(minutes))}:${normalize(String(seconds))}`;\r\n};","import React, {useRef, useState} from \"react\";\r\nimport styled, {css} from \"styled-components\";\r\nimport format from \"date-fns/format\";\r\nimport prettyBytes from \"pretty-bytes\";\r\n\r\nimport {File, ID} from \"@lib/typings\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {formatDuration} from \"@lib/formatting\";\r\nimport {Icon, Text} from \"@ui/atoms\";\r\nimport {Avatar} from \"@ui/molecules\";\r\n\r\ninterface MessageProps {\r\n  id: ID;\r\n  isOwn: boolean;\r\n  isRead: boolean;\r\n  avatar: string;\r\n  text: string | null;\r\n  images: string[] | null;\r\n  audio: string | null;\r\n  files: File[] | null;\r\n  date: Date;\r\n}\r\n\r\ninterface AudioState {\r\n  duration: number;\r\n  isPaused: boolean;\r\n  isStarted: boolean;\r\n  time: number;\r\n}\r\n\r\nexport const Message: React.FC<MessageProps> = ({id, isOwn, isRead, avatar, text, date, images, files, audio: audioSrc}) => {\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const messageRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const [audio, setAudio] = useState<AudioState>({\r\n    duration: 0,\r\n    isPaused: true,\r\n    isStarted: false,\r\n    time: 0\r\n  });\r\n\r\n  const handleImageLoad = ({currentTarget}: React.SyntheticEvent<HTMLImageElement>) => {\r\n    const parent = messageRef.current!.parentElement!;\r\n\r\n    parent.scroll(0, parent.scrollTop + currentTarget.clientHeight);\r\n  };\r\n\r\n  const handleAudioDurationChange = ({currentTarget}: React.ChangeEvent<HTMLAudioElement>) => {\r\n    if (currentTarget.duration === Infinity) {\r\n      currentTarget.currentTime = 100000000;\r\n    }\r\n\r\n    const {duration} = currentTarget;\r\n\r\n    if (duration === Infinity) return;\r\n\r\n    setAudio({\r\n      ...audio,\r\n      duration: Math.ceil(duration) * 1000\r\n    });\r\n  };\r\n\r\n  const playAudio = () => {\r\n    if (!audioRef.current) return;\r\n\r\n    audioRef.current.play();\r\n\r\n    setAudio({\r\n      ...audio,\r\n      isPaused: false,\r\n      isStarted: true\r\n    });\r\n  };\r\n\r\n  const pauseAudio = () => {\r\n    if (!audioRef.current) return;\r\n\r\n    audioRef.current.pause();\r\n\r\n    setAudio({\r\n      ...audio, isPaused: true\r\n    });\r\n  };\r\n\r\n  const handleAudioEnd = () => {\r\n    setAudio({\r\n      ...audio,\r\n      isPaused: true,\r\n      isStarted: false,\r\n      time: 0\r\n    });\r\n  };\r\n\r\n  const handleAudioTimeUpdate = () => {\r\n    setAudio({\r\n      ...audio,\r\n      time: Math.ceil(audioRef.current!.currentTime) * 1000\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Wrapper\r\n      reverse={isOwn}\r\n      ref={messageRef}\r\n      data-id={id}\r\n      data-is-read={isRead}\r\n      data-is-own={isOwn}>\r\n      <Block reverse={isOwn} isOwn={isOwn}>\r\n        <Avatar url={avatar} small/>\r\n\r\n        {(text || images || audio || files) && (\r\n          <Bubble isOwn={isOwn}>\r\n            <Col gap=\"2.5rem\">\r\n              {images && (\r\n                images.map((src, idx) => (\r\n                  <Image\r\n                    key={idx}\r\n                    src={src}\r\n                    onLoad={handleImageLoad}\r\n\r\n                  />\r\n                ))\r\n              )}\r\n\r\n              {text && (\r\n                <Text>{text}</Text>\r\n              )}\r\n\r\n              {audioSrc && (\r\n                <>\r\n                  <Row align=\"center\" gap=\"2rem\">\r\n                    <Icon\r\n                      name={audio.isPaused ? \"play\" : \"pause\"}\r\n                      onClick={audio.isPaused ? playAudio : pauseAudio}/>\r\n\r\n                    <Icon name=\"wave\"/>\r\n\r\n                    <Text>{formatDuration(audio.isStarted ? audio.time : audio.duration)}</Text>\r\n                  </Row>\r\n\r\n                  <audio\r\n                    ref={audioRef}\r\n                    onEnded={handleAudioEnd}\r\n                    onDurationChange={handleAudioDurationChange}\r\n                    onTimeUpdate={handleAudioTimeUpdate}>\r\n                    <source src={audioSrc}/>\r\n                  </audio>\r\n                </>\r\n              )}\r\n\r\n              {files && files.map(({id, url, name, size}) => (\r\n                <a key={id} href={url} target=\"_blank\" rel=\"noreferrer\">\r\n                  <Row align=\"center\" gap=\"1.5rem\">\r\n                    <Icon name=\"document\"/>\r\n\r\n                    <Col justify=\"space-between\" width=\"20rem\">\r\n                      <Text small ellipsis>{name}</Text>\r\n                      <Text small ellipsis>{prettyBytes(size)}</Text>\r\n                    </Col>\r\n                  </Row>\r\n                </a>\r\n              ))}\r\n            </Col>\r\n\r\n            <Row width=\"100%\" gap=\"1rem\" align=\"center\" justify=\"flex-end\">\r\n              {isOwn && <Icon\r\n                width=\"1.5rem\"\r\n                height=\"1.5rem\"\r\n                name={isRead ? \"double-check\" : \"check\"}/>}\r\n              <Text small>{format(date, \"HH:mm\")}</Text>\r\n            </Row>\r\n          </Bubble>\r\n        )}\r\n      </Block>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\ninterface MessageStylingProps {\r\n  isOwn: boolean;\r\n}\r\n\r\nconst Wrapper = styled(Row).attrs(() => ({\r\n  width: \"100%\"\r\n}))`\r\n  margin: 2rem 0;\r\n`;\r\n\r\nconst Block = styled(Row).attrs(() => ({\r\n  align: \"flex-end\"\r\n}))<MessageStylingProps>`\r\n  ${({isOwn}) => css`\r\n    & > :not(:first-child) {\r\n      margin-left: ${!isOwn ? \"2rem\" : 0};\r\n      margin-right: ${isOwn ? \"2rem\" : 0};\r\n    }\r\n  `};\r\n`;\r\n\r\nconst Bubble = styled(Col).attrs(() => ({\r\n  gap: \"1.5rem\",\r\n  padding: \"2rem\"\r\n}))<MessageStylingProps>`\r\n  ${({isOwn}) => css`\r\n    background-color: ${({theme}) => isOwn ? theme.palette.secondary.light : theme.palette.primary.light};\r\n  `};\r\n  \r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  max-width: 20rem;\r\n  max-height: 20rem;\r\n`;\r\n\r\ninterface SystemMessageProps {\r\n  text: string | null;\r\n}\r\n\r\nexport const SystemMessage: React.FC<SystemMessageProps> = ({text}) => (\r\n  <Wrapper justify=\"center\" data-is-system={true}>\r\n    <Text>{text}</Text>\r\n  </Wrapper>\r\n);\r\n","import {AxiosPromise, AxiosRequestConfig} from \"axios\";\r\n\r\nimport {request} from \"@lib/http\";\r\nimport {File as IFile} from \"@lib/typings\";\r\n\r\ninterface UploadData {\r\n  file: File;\r\n}\r\n\r\ninterface UploadResponse {\r\n  file: IFile;\r\n}\r\n\r\nconst upload = ({file}: UploadData, options: Partial<AxiosRequestConfig> = {}): AxiosPromise<UploadResponse> => {\r\n  const formData = new FormData();\r\n\r\n  formData.append(\"file\", file);\r\n\r\n  return request({\r\n    url: \"/v1/api/upload\",\r\n    method: \"POST\",\r\n    data: formData,\r\n    ...options\r\n  });\r\n}\r\n\r\nexport const uploadApi = {\r\n  upload\r\n};","const stopAndRemoveTrack = (mediaStream: MediaStream) => (track: MediaStreamTrack) => {\r\n  track.stop();\r\n  mediaStream.removeTrack(track);\r\n};\r\n\r\nexport const stopMediaStream = (mediaStream: MediaStream) => {\r\n  mediaStream.getTracks().forEach(stopAndRemoveTrack(mediaStream));\r\n};","import React, {useState} from \"react\";\r\nimport {nanoid} from \"nanoid\";\r\nimport prettyBytes from \"pretty-bytes\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {uploadApi} from \"@api/upload.api\";\r\nimport {UploadingFile} from \"@features/chats\";\r\nimport {stopMediaStream} from \"@lib/media-recorder\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {formatDuration} from \"@lib/formatting\";\r\nimport {File, ID} from \"@lib/typings\";\r\nimport {Button, Icon, Input, Loader, Text} from \"@ui/atoms\";\r\nimport {ProgressBar} from \"@ui/molecules\";\r\n\r\ninterface ChatFormProps {\r\n  handleSubmit: (options: {\r\n    text: string | null;\r\n    files: File[] | null;\r\n    audio: {id: ID; url: string} | null;\r\n    images: {id: ID; url: string}[] | null;\r\n  }) => void;\r\n}\r\n\r\ninterface ChatFormState {\r\n  images: UploadingFile[];\r\n  files: UploadingFile[];\r\n  audio: ID;\r\n  text: string;\r\n}\r\n\r\ninterface ChatRecordingState {\r\n  isRecording: boolean;\r\n  isUploading: boolean;\r\n  mediaRecorder: MediaRecorder | null;\r\n  duration: number;\r\n}\r\n\r\nexport const ChatForm: React.FC<ChatFormProps> = ({handleSubmit}) => {\r\n  const [form, setForm] = useState<ChatFormState>({\r\n    audio: \"\", files: [],\r\n    images: [], text: \"\"\r\n  });\r\n\r\n  const [audio, setAudio] = useState<ChatRecordingState>({\r\n    isRecording: false,\r\n    isUploading: false,\r\n    mediaRecorder: null,\r\n    duration: 0\r\n  });\r\n\r\n  const {text, images, files} = form;\r\n\r\n  const handleTextChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm({\r\n      ...form, text: event.currentTarget.value\r\n    });\r\n  };\r\n\r\n  const handleFilesChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.currentTarget.files && event.currentTarget.files[0];\r\n\r\n    if (!file) return;\r\n\r\n    const key = nanoid();\r\n\r\n    setForm({\r\n      ...form, files: [...files, {\r\n        key, isUploading: true, progress: 0,\r\n        name: file.name\r\n      }]\r\n    });\r\n\r\n    uploadApi.upload({file}, {\r\n      onUploadProgress: ({loaded, total}) => {\r\n        setForm((form) => ({\r\n          ...form, files: form.files.map((file) => file.key === key ?\r\n            ({...file, progress: loaded / total}) : file)\r\n        }));\r\n      }\r\n    }).then(({data}) => {\r\n      setForm((form) => ({\r\n        ...form, files: form.files.map((file) => file.key === key ? ({\r\n          ...file,\r\n          id: data.file.id,\r\n          size: data.file.size,\r\n          url: data.file.url,\r\n          isUploading: false,\r\n          progress: 1\r\n        }) : file)\r\n      }));\r\n    }).catch(() => {\r\n      setForm((form) => ({\r\n        ...form, files: form.files.filter((file) => file.key !== key)\r\n      }));\r\n    });\r\n  };\r\n\r\n  const handleImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.currentTarget.files && event.currentTarget.files[0];\r\n\r\n    if (!file) return;\r\n\r\n    const key = nanoid();\r\n\r\n    setForm({\r\n      ...form,\r\n      images: [...images, {\r\n        key, progress: 0, isUploading: true,\r\n        name: file.name\r\n      }]\r\n    });\r\n\r\n    uploadApi.upload({file}, {\r\n      onUploadProgress: ({loaded, total}) => {\r\n        setForm((form) => ({\r\n          ...form, images: form.images.map((image) => image.key === key ?\r\n            ({...image, progress: loaded / total}) : image)\r\n        }));\r\n      }\r\n    }).then(({data: {file}}) => {\r\n      setForm((form) => ({\r\n        ...form, images: form.images.map((image) => image.key === key ? ({\r\n          ...image,\r\n          id: file.id,\r\n          url: file.url,\r\n          size: file.size,\r\n          isUploading: false,\r\n          progress: 1\r\n        }) : image)\r\n      }));\r\n    }).catch(() => {\r\n      setForm((form) => ({\r\n        ...form, images: form.images.filter((image) => image.key !== key)\r\n      }));\r\n    });\r\n  };\r\n\r\n  const removeFile = (key: UploadingFile[\"key\"]) => {\r\n    setForm({\r\n      ...form, files: files.filter((file) => file.key !== key)\r\n    });\r\n  };\r\n\r\n  const removeImage = (key: UploadingFile[\"key\"]) => {\r\n    setForm({\r\n      ...form, images: images.filter((image) => image.key !== key)\r\n    });\r\n  };\r\n\r\n  const attachments: (UploadingFile & {type: string})[] = [\r\n    ...files.map((file) => ({...file, type: \"files\"})),\r\n    ...images.map(((image) => ({...image, type: \"images\"})))\r\n  ];\r\n\r\n  const startRecording = () => {\r\n    setAudio({\r\n      duration: 0,\r\n      mediaRecorder: null,\r\n      isRecording: false,\r\n      isUploading: false\r\n    });\r\n\r\n    navigator.mediaDevices.getUserMedia({audio: true})\r\n      .then((stream) => {\r\n        const mediaRecorder = new MediaRecorder(stream);\r\n\r\n        setAudio((audio) => ({\r\n          ...audio, mediaRecorder\r\n        }));\r\n\r\n        let durationInterval: NodeJS.Timeout | null = null;\r\n        let isCancelled: boolean = false;\r\n\r\n        mediaRecorder.onstart = () => {\r\n          setAudio((audio) => ({\r\n            ...audio, isRecording: true\r\n          }));\r\n\r\n          durationInterval = setInterval(() => {\r\n            setAudio((audio) => ({\r\n              ...audio, duration: audio.duration + 1000\r\n            }));\r\n          }, 1000);\r\n        };\r\n\r\n        mediaRecorder.onstop = () => {\r\n          if (durationInterval) clearInterval(durationInterval);\r\n\r\n          stopMediaStream(mediaRecorder.stream);\r\n        };\r\n\r\n        mediaRecorder.onpause = () => {\r\n          isCancelled = true;\r\n\r\n          stopMediaStream(mediaRecorder.stream);\r\n\r\n          setAudio({\r\n            ...audio, isRecording: false\r\n          });\r\n        };\r\n\r\n        mediaRecorder.ondataavailable = (event) => {\r\n          if (isCancelled) return;\r\n\r\n          setAudio((audio) => ({\r\n            ...audio, isUploading: true\r\n          }));\r\n\r\n          const mp3 = new Blob([event.data], {\r\n            type: \"audio/mpeg\"\r\n          });\r\n\r\n          uploadApi.upload({\r\n            file: mp3 as globalThis.File\r\n          }).then(({data: {file: {id, url}}}) => {\r\n            handleSubmit({\r\n              audio: {id, url},\r\n              text: null,\r\n              images: null,\r\n              files: null\r\n            });\r\n          }).finally(() => {\r\n            setAudio((audio) => ({\r\n              ...audio,\r\n              isUploading: false,\r\n              isRecording: false\r\n            }));\r\n          });\r\n        };\r\n\r\n        mediaRecorder.start();\r\n      });\r\n  };\r\n\r\n  const cancelRecording = () => {\r\n    audio.mediaRecorder!.pause();\r\n  };\r\n\r\n  const clearInputs = () => {\r\n    setForm({\r\n      text: \"\", audio: \"\",\r\n      files: [], images: []\r\n    });\r\n  };\r\n\r\n  const handleAudioFormSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n\r\n    audio.mediaRecorder!.stop();\r\n\r\n    clearInputs();\r\n  };\r\n\r\n  const handleMessageFormSubmit = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n\r\n    const attachedImages = images\r\n      .filter(({isUploading}) => !isUploading)\r\n      .map(({id, url}) => ({id: id!, url: url!}));\r\n\r\n    const attachedFiles = files\r\n      .filter(({isUploading}) => !isUploading)\r\n      .map(({id, url, name, size}) => ({id: id!, url: url!, name: name!, size: size!}))\r\n\r\n    handleSubmit({\r\n      text: text || null, audio: null,\r\n      images: !!attachedImages.length ? attachedImages : null,\r\n      files: !!attachedFiles.length ? attachedFiles : null\r\n    });\r\n\r\n    clearInputs();\r\n  };\r\n\r\n  const handleFormSubmit = audio.isRecording ? handleAudioFormSubmit : handleMessageFormSubmit;\r\n\r\n  const areFilesAttached = !!attachments.length;\r\n\r\n  return (\r\n    <Row width=\"100%\" padding=\"2rem 5rem\">\r\n      <Form onSubmit={handleFormSubmit}>\r\n        <Col width=\"100%\" gap=\"2rem\">\r\n          {audio.isRecording ? (\r\n            <Row width=\"100%\" justify=\"space-between\" align=\"center\">\r\n              <Icon\r\n                name=\"cross\"\r\n                type=\"button\"\r\n                onClick={cancelRecording}\r\n                pointer secondary/>\r\n\r\n              <Text>{formatDuration(Math.ceil(audio.duration))}</Text>\r\n\r\n              {audio.isUploading ? <Loader /> : (\r\n                <Button type=\"submit\" pure>\r\n                  <Icon name=\"telegram\"/>\r\n                </Button>\r\n              )}\r\n            </Row>\r\n          ) : (\r\n            <FormPanel>\r\n\r\n              <Input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                onChange={handleFilesChange}\r\n                invisible label={(\r\n                <Icon\r\n                  name=\"attachment\"\r\n                  secondary pointer/>\r\n              )}/>\r\n\r\n              <Input\r\n                type=\"file\"\r\n                name=\"image\"\r\n                onChange={handleImageChange}\r\n                accept=\"image/*\"\r\n                invisible label={(\r\n                <Icon\r\n                  name=\"uploading-image\"\r\n                  secondary pointer/>\r\n              )}/>\r\n\r\n              <Icon\r\n                name=\"smile\"\r\n                secondary pointer/>\r\n\r\n              <Input\r\n                width=\"100%\"\r\n                placeholder=\"Write a message...\"\r\n                name=\"message\"\r\n                type=\"text\"\r\n                value={text}\r\n                onChange={handleTextChange}\r\n                transparent/>\r\n\r\n              <Icon\r\n                onClick={startRecording}\r\n                name=\"microphone\"\r\n                type=\"button\"\r\n                secondary pointer/>\r\n\r\n              <Button type=\"submit\" pure>\r\n                <Icon name=\"telegram\"/>\r\n              </Button>\r\n            </FormPanel>\r\n          )}\r\n\r\n          {areFilesAttached && (\r\n            <Row width=\"100%\" padding=\"0 1rem\">\r\n              <Col width=\"100%\" gap=\"1rem\">\r\n                {attachments.map(({key, name, size, url, progress, isUploading, type}) => {\r\n                  const remove = () => type === \"images\" ? removeImage(key) :\r\n                    type === \"files\" ? removeFile(key) : null;\r\n\r\n                  return (\r\n                    <Row key={key} width=\"100%\" justify=\"space-between\" align=\"center\">\r\n                      {isUploading ? (\r\n                        <>\r\n                          <Row width=\"70%\" gap=\"1rem\" align=\"center\">\r\n                            <Row width=\"60%\">\r\n                              <ProgressBar progress={progress}/>\r\n                            </Row>\r\n\r\n                            <Text width=\"40%\" ellipsis>{name}</Text>\r\n                          </Row>\r\n\r\n                          <Icon\r\n                            onClick={remove}\r\n                            name=\"cross\"\r\n                            type=\"button\"\r\n                            pointer secondary/>\r\n                        </>\r\n                      ) : type === \"files\" ? (\r\n                        <>\r\n                          <Row width=\"70%\" gap=\"1rem\" align=\"center\">\r\n                            <Icon name=\"document\" width=\"3rem\" height=\"3rem\" secondary/>\r\n\r\n                            <Col justify=\"space-between\">\r\n                              <Text secondary ellipsis>{name}</Text>\r\n                              <Text secondary ellipsis>{prettyBytes(size!)}</Text>\r\n                            </Col>\r\n                          </Row>\r\n\r\n                          <Icon\r\n                            onClick={remove}\r\n                            name=\"cross\"\r\n                            type=\"button\"\r\n                            pointer secondary/>\r\n                        </>\r\n                      ) : type === \"images\" ? (\r\n                        <>\r\n                          <Row width=\"70%\">\r\n                            <AttachedImage src={url} alt=\"attached-image\"/>\r\n                          </Row>\r\n\r\n                          <Icon\r\n                            onClick={remove}\r\n                            name=\"cross\"\r\n                            type=\"button\"\r\n                            pointer secondary/>\r\n                        </>\r\n                      ) : null}\r\n                    </Row>\r\n                  );\r\n                })}\r\n              </Col>\r\n            </Row>\r\n          )}\r\n        </Col>\r\n      </Form>\r\n    </Row>\r\n  );\r\n};\r\n\r\nconst Form = styled.form`\r\n  width: 100%;\r\n`;\r\n\r\nconst FormPanel = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  align: \"center\",\r\n  gap: \"2rem\",\r\n  padding: \"1rem 3rem\"\r\n}))`\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst AttachedImage = styled.img`\r\n  max-width: 7.5rem;\r\n  max-height: 7.5rem;\r\n`;","import React, {ReactElement, useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {authSelectors} from \"@features/auth\";\r\nimport {DirectChatMessage, DirectChatPartner, directsActions} from \"@features/directs\";\r\nimport {groupsActions, GroupChatMessage, GroupChatDetails} from \"@features/groups\";\r\nimport {socket} from \"@lib/websockets\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\n\r\nexport const ChatEventsListeners: React.FC = ({children}) => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const credentials = useSelector(authSelectors.credentials);\r\n\r\n  useEffect(() => {\r\n    if (!!credentials) {\r\n      socket.on(\"DIRECT_CHAT:MESSAGE\", ({message, partner}: {message: DirectChatMessage; partner: DirectChatPartner}) => {\r\n        dispatch(directsActions.addMessage({\r\n          message, isOwn: false,\r\n          partnerId: partner.id\r\n        }));\r\n      });\r\n\r\n      socket.on(\"GROUP_CHAT:MESSAGE\", ({message, chat}: {message: GroupChatMessage; chat: GroupChatDetails}) => {\r\n        const isOwn = (message.sender && message.sender.id) === credentials.id;\r\n\r\n        if (!isOwn) {\r\n          dispatch(groupsActions.addMessage({\r\n            message, isOwn: false,\r\n            groupId: chat.id\r\n          }));\r\n        }\r\n      });\r\n\r\n      socket.on(\"DIRECT_CHAT:MESSAGE_READ\", ({message, partner}: {message: DirectChatMessage; partner: DirectChatPartner}) => {\r\n        dispatch(directsActions.readMessage({\r\n          partnerId: partner.id,\r\n          messageId: message.id\r\n        }));\r\n      });\r\n\r\n      socket.on(\"GROUP_CHAT:MESSAGE_READ\", ({message, chat}: {message: GroupChatMessage; chat: GroupChatDetails}) => {\r\n        dispatch(groupsActions.readMessage({\r\n          groupId: chat.id,\r\n          messageId: message.id\r\n        }));\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return children as ReactElement;\r\n};","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {ModalProps, Modal} from \"@lib/modal\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {H4, Icon} from \"@ui/atoms\";\r\n\r\nexport const ChatCreationModal: React.FC<ModalProps> = ({closeModal}) => {\r\n  return (\r\n    <Modal closeModal={closeModal}>\r\n      <Wrapper>\r\n        <Header>\r\n          <div />\r\n\r\n          <H4>Choose which one to create</H4>\r\n\r\n          <Icon\r\n            onClick={closeModal}\r\n            name=\"cross\"\r\n            pointer/>\r\n        </Header>\r\n\r\n        <Content>\r\n          <Answer />\r\n          <Answer />\r\n        </Content>\r\n      </Wrapper>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled(Col).attrs(() => ({\r\n  width: \"65rem\"\r\n}))`\r\n  max-height: 75vh;\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst Header = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  justify: \"space-between\",\r\n  padding: \"2rem\",\r\n  align: \"center\"\r\n}))`\r\n  border-bottom: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n\r\nconst Content = styled(Col).attrs(() => ({\r\n  width: \"100%\",\r\n  padding: \"2rem\"\r\n}))`  \r\n`;\r\n\r\nconst Answer = styled.div`\r\n  width: 100%;\r\n  background-color: ${({theme}) => theme.palette.primary.main};\r\n  border-radius: 1rem;\r\n  padding: 1rem;\r\n`;\r\n","import {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {unwrapResult} from \"@reduxjs/toolkit\";\r\n\r\nimport {directsActions, directsSelectors} from \"@features/directs\";\r\nimport {groupsActions, groupsSelectors} from \"@features/groups\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {socket} from \"@lib/websockets\";\r\n\r\nexport const useFetchingChats = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const directs = useSelector(directsSelectors.chats);\r\n  const areDirectsFetching = useSelector(directsSelectors.areChatsFetching);\r\n\r\n  const groups = useSelector(groupsSelectors.chats);\r\n  const areGroupsFetching = useSelector(groupsSelectors.areChatsFetching);\r\n\r\n  const toFetchDirects = !directs && !areDirectsFetching;\r\n  const toFetchGroups = !groups && !areGroupsFetching;\r\n\r\n  useEffect(() => {\r\n    if (toFetchDirects) {\r\n      dispatch(directsActions.fetchChats());\r\n    }\r\n\r\n    if (toFetchGroups) {\r\n      dispatch(groupsActions.fetchChats())\r\n        .then(unwrapResult)\r\n        .then(({chats}) => {\r\n          socket.emit(\"GROUP_CHAT:SUBSCRIBE\", {\r\n            groups: chats.map((chat) => chat.id)\r\n          });\r\n        });\r\n    }\r\n  }, []);\r\n};","import {createAction} from \"@reduxjs/toolkit\";\r\n\r\nconst type = \"chats\";\r\n\r\nexport interface SetSearchingPayload {\r\n  search: string;\r\n}\r\n\r\nexport const setSearching = createAction<SetSearchingPayload>(`${type}/setSearching`);","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nimport {SetSearchingPayload} from \"./actions\";\r\nimport * as actions from \"./actions\";\r\n\r\ninterface ChatsState {\r\n  search: string;\r\n}\r\n\r\nexport const reducer = createReducer<ChatsState>(\r\n  {\r\n    search: \"\"\r\n  },\r\n  {\r\n    [actions.setSearching.type]: (state, {payload}: PayloadAction<SetSearchingPayload>) => {\r\n      state.search = payload.search;\r\n    }\r\n  }\r\n);","import {RootState} from \"@lib/typings\";\r\n\r\nconst chatsState = (state: RootState) => state.chats;\r\n\r\nexport const search = (state: RootState) => chatsState(state).search;","import {combineReducers} from \"@reduxjs/toolkit\";\r\n\r\nimport {chatsReducer} from \"@features/chats\";\r\nimport {authReducer} from \"@features/auth\";\r\nimport {directsReducer} from \"@features/directs\";\r\nimport {groupsReducer} from \"@features/groups\";\r\nimport {usersReducer} from \"@features/users\";\r\nimport {themingReducer} from \"@lib/theming\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  theming: themingReducer,\r\n  auth: authReducer,\r\n  directs: directsReducer,\r\n  groups: groupsReducer,\r\n  chats: chatsReducer,\r\n  users: usersReducer\r\n});","import {configureStore} from \"@reduxjs/toolkit\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nimport {rootReducer} from \"./root-reducer\";\r\n\r\nexport const store = configureStore({\r\n  reducer: rootReducer\r\n});\r\n\r\ntype RootDispatch = typeof store.dispatch;\r\n\r\nexport const useRootDispatch = () => useDispatch<RootDispatch>();","import React from \"react\";\r\nimport {RouteProps, Redirect, Route} from \"react-router-dom\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {authSelectors} from \"@features/auth\";\r\n\r\ninterface PrivateRouteProps extends RouteProps {}\r\n\r\nexport const PrivateRoute: React.FC<PrivateRouteProps> = (props) => {\r\n    const isAuthenticated = useSelector(authSelectors.isAuthenticated);\r\n\r\n    if (!isAuthenticated) return <Redirect to=\"/login\" />;\r\n\r\n    return <Route {...props} />;\r\n};\r\n\r\ninterface PublicOnlyRouteProps extends RouteProps {}\r\n\r\nexport const PublicOnlyRoute: React.FC<PublicOnlyRouteProps> = (props) => {\r\n    const isAuthenticated = useSelector(authSelectors.isAuthenticated);\r\n\r\n    if (isAuthenticated) return <Redirect to=\"/\" />;\r\n\r\n    return <Route {...props} />;\r\n};","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useForm} from \"react-hook-form\";\r\nimport {yupResolver} from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport {AuthTemplate, AuthToggleButton, authActions} from \"@features/auth\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {getFingerprint} from \"@lib/fingerprint\";\r\nimport {Button, Input} from \"@ui/atoms\";\r\n\r\nexport const LoginPage: React.FC = () => (\r\n    <AuthTemplate>\r\n        <Col width=\"70%\" justify=\"space-between\">\r\n            <Row width=\"100%\" justify=\"flex-end\">\r\n                <AuthToggleButton to=\"/login\" active>Sign in</AuthToggleButton>\r\n                <AuthToggleButton to=\"/register\">Sign up</AuthToggleButton>\r\n            </Row>\r\n\r\n            <LoginForm/>\r\n        </Col>\r\n    </AuthTemplate>\r\n);\r\n\r\ninterface LoginFormInputs {\r\n    username: string;\r\n    password: string;\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n    username: yup.string()\r\n        .required(\"Username is required\"),\r\n    password: yup.string()\r\n        .required(\"Password is required\")\r\n});\r\n\r\nconst LoginForm: React.FC = () => {\r\n    const {register, handleSubmit, formState: {errors, isValid}} = useForm<LoginFormInputs>({\r\n        resolver: yupResolver(schema),\r\n        mode: \"onChange\",\r\n        defaultValues: {\r\n            username: \"\",\r\n            password: \"\"\r\n        }\r\n    });\r\n\r\n    const dispatch = useRootDispatch();\r\n\r\n    const onSubmit = async (data: LoginFormInputs) => {\r\n        const fingerprint = await getFingerprint();\r\n\r\n        dispatch(authActions.fetchLogin({\r\n          ...data, fingerprint\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <Form onSubmit={handleSubmit(onSubmit)}>\r\n            <Col width=\"100%\" gap=\"60px\">\r\n                <Col gap=\"35px\">\r\n                    <Input {...register(\"username\")}\r\n                           type=\"text\"\r\n                           name=\"username\"\r\n                           error={errors.username?.message}\r\n                           label=\"Username\"\r\n                           placeholder=\"alex23\"/>\r\n\r\n                    <Input {...register(\"password\")}\r\n                           type=\"password\"\r\n                           name=\"password\"\r\n                           error={errors.password?.message}\r\n                           label=\"Password\"\r\n                           placeholder=\"x x x x x x x x\"/>\r\n                </Col>\r\n\r\n                <Row>\r\n                    <Button disabled={!isValid} type=\"submit\">Sign in</Button>\r\n                </Row>\r\n            </Col>\r\n        </Form>\r\n    );\r\n};\r\n\r\nconst Form = styled.form`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useForm} from \"react-hook-form\";\r\nimport {yupResolver} from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport {AuthTemplate, AuthToggleButton, authActions} from \"@features/auth\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {regex} from \"@lib/regex\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {getFingerprint} from \"@lib/fingerprint\";\r\nimport {Button, Input} from \"@ui/atoms\";\r\n\r\nexport const RegisterPage: React.FC = () => (\r\n  <AuthTemplate>\r\n    <Col width=\"70%\" justify=\"space-between\">\r\n      <Row width=\"100%\" justify=\"flex-end\">\r\n        <AuthToggleButton to=\"/login\">Sign in</AuthToggleButton>\r\n        <AuthToggleButton to=\"/register\" active>Sign up</AuthToggleButton>\r\n      </Row>\r\n\r\n      <RegisterForm/>\r\n    </Col>\r\n  </AuthTemplate>\r\n);\r\n\r\ninterface RegisterFormInputs {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nconst schema = yup.object().shape({\r\n  username: yup.string()\r\n    .required(\"Username is required\")\r\n    .matches(regex.alphaNumeric, \"Username must contain only numbers and letters\")\r\n    .min(3, \"Username must contain at least 3 characters\"),\r\n  password: yup.string()\r\n    .required(\"Password is required\")\r\n    .min(8, \"Password must contain at least 8 characters\")\r\n});\r\n\r\nconst RegisterForm: React.FC = () => {\r\n  const {register, handleSubmit, formState: {errors, isValid}} = useForm<RegisterFormInputs>({\r\n    resolver: yupResolver(schema),\r\n    mode: \"onChange\",\r\n    defaultValues: {\r\n      username: \"\",\r\n      password: \"\"\r\n    }\r\n  });\r\n\r\n  const dispatch = useRootDispatch();\r\n\r\n  const onSubmit = async (data: RegisterFormInputs) => {\r\n    const fingerprint = await getFingerprint();\r\n\r\n    dispatch(authActions.fetchRegister({\r\n      ...data, fingerprint\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={handleSubmit(onSubmit)}>\r\n      <Col width=\"100%\" gap=\"60px\">\r\n        <Col gap=\"35px\">\r\n          <Input {...register(\"username\")}\r\n                 type=\"text\"\r\n                 name=\"username\"\r\n                 error={errors.username?.message}\r\n                 label=\"Username\"\r\n                 placeholder=\"alex23\"/>\r\n\r\n          <Input {...register(\"password\")}\r\n                 type=\"password\"\r\n                 name=\"password\"\r\n                 error={errors.password?.message}\r\n                 label=\"Password\"\r\n                 placeholder=\"x x x x x x x x\"/>\r\n        </Col>\r\n\r\n        <Row>\r\n          <Button disabled={!isValid} type=\"submit\">Sign up</Button>\r\n        </Row>\r\n      </Col>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst Form = styled.form`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;","export const regex = {\r\n  alphaNumeric: /^[a-zA-Z0-9_]*$/\r\n};","import React, {useEffect} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {directsActions, directsSelectors} from \"@features/directs\";\r\nimport {groupsActions, groupsSelectors} from \"@features/groups\";\r\nimport {chatsActions, ChatsList, chatsSelectors} from \"@features/chats\";\r\nimport {usersActions} from \"@features/users\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {Icon, H4, Input, Text, H3} from \"@ui/atoms\";\r\nimport {MainTemplate} from \"@ui/templates\";\r\n\r\nexport const HomePage: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const directChats = useSelector(directsSelectors.chats);\r\n  const areDirectChatsFetching = useSelector(directsSelectors.areChatsFetching);\r\n\r\n  const groupChats = useSelector(groupsSelectors.chats);\r\n  const areGroupChatsFetching = useSelector(groupsSelectors.areChatsFetching);\r\n\r\n  const toFetchDirectChats = !directChats && !areDirectChatsFetching;\r\n  const toFetchGroupChats = !groupChats && !areGroupChatsFetching;\r\n\r\n  useEffect(() => {\r\n    if (toFetchDirectChats) dispatch(directsActions.fetchChats());\r\n    if (toFetchGroupChats) dispatch(groupsActions.fetchChats());\r\n  }, []);\r\n\r\n  return (\r\n    <MainTemplate>\r\n      <Wrapper>\r\n        <SidebarWrapper>\r\n          <Sidebar>\r\n            <Icon name=\"logo\"/>\r\n          </Sidebar>\r\n        </SidebarWrapper>\r\n\r\n        <ListPanelWrapper>\r\n          <Col gap=\"3rem\">\r\n            <Row justify=\"space-between\">\r\n              <H4>Messages</H4>\r\n              <Text clickable secondary>\r\n                + Create new chat\r\n              </Text>\r\n            </Row>\r\n\r\n            <SearchBar/>\r\n          </Col>\r\n\r\n          <ChatsList/>\r\n        </ListPanelWrapper>\r\n\r\n        <ChatPanelWrapper>\r\n          <H3>Select chat to start messaging</H3>\r\n        </ChatPanelWrapper>\r\n      </Wrapper>\r\n    </MainTemplate>\r\n  );\r\n};\r\n\r\nconst SearchBar: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const search = useSelector(chatsSelectors.search);\r\n\r\n  const handleChange = ({currentTarget}: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = currentTarget.value;\r\n\r\n    dispatch(chatsActions.setSearching({\r\n      search: value\r\n    }));\r\n\r\n    dispatch(usersActions.fetchSearchingUsers({\r\n      query: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      placeholder=\"Search chat\"\r\n      onChange={handleChange}\r\n      value={search}/>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: ${({theme}) => theme.palette.primary.main};\r\n`;\r\n\r\nconst SidebarWrapper = styled.aside`\r\n  width: 10%;\r\n  padding: 3rem 0 3rem 2rem;\r\n`;\r\n\r\nconst Sidebar = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n  padding: 3rem 0;\r\n`;\r\n\r\nconst ListPanelWrapper = styled(Col).attrs(() => ({\r\n  gap: \"3rem\"\r\n}))`\r\n  width: 30%;\r\n  height: 100%;\r\n  padding: 4rem;\r\n`;\r\n\r\nconst ChatPanelWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 60%;\r\n  height: 100%;\r\n  border-left: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n\r\n\r\n","import React, {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport {nanoid} from \"nanoid\";\r\nimport {unwrapResult} from \"@reduxjs/toolkit\";\r\n\r\nimport {authSelectors} from \"@features/auth\";\r\nimport {\r\n  ChatsList,\r\n  formatMessageDate,\r\n  ChatForm,\r\n  useFetchingChats,\r\n  ChatCreationModal,\r\n  chatsSelectors,\r\n  chatsActions\r\n} from \"@features/chats\";\r\nimport {directsSelectors, directsActions, DirectMessagesList, DirectAttachmentsModal} from \"@features/directs\";\r\nimport {usersActions} from \"@features/users\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {useModal} from \"@lib/modal\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {H4, Icon, Input, Text} from \"@ui/atoms\";\r\nimport {Avatar} from \"@ui/molecules\";\r\nimport {MainTemplate} from \"@ui/templates\";\r\n\r\nexport const DirectPage = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  useFetchingChats();\r\n\r\n  const {partnerId} = useParams<{partnerId: ID}>();\r\n\r\n  const {closeModal, isModalOpen, openModal} = useModal();\r\n\r\n  const chat = useSelector(directsSelectors.chat(partnerId));\r\n  const isChatFetching = useSelector(directsSelectors.isChatFetching(partnerId));\r\n  const messages = useSelector(directsSelectors.messages(partnerId));\r\n  const areMessagesFetching = useSelector(directsSelectors.areMessagesFetching(partnerId));\r\n  const areMessagesFetched = useSelector(directsSelectors.areMessagesFetched(partnerId));\r\n\r\n  const toFetchMessages = !areMessagesFetched || (!messages && !areMessagesFetching);\r\n  const toFetchChat = !chat && !isChatFetching;\r\n\r\n  useEffect(() => {\r\n    if (toFetchChat) {\r\n      dispatch(directsActions.fetchChat({\r\n        partnerId,\r\n        partner: partnerId\r\n      })).then(() => {\r\n        if (toFetchMessages) dispatch(directsActions.fetchMessages({\r\n          partnerId,\r\n          partner: partnerId,\r\n          skip: messages ? messages.length : 0\r\n        }));\r\n      })\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {isModalOpen && (\r\n        <ChatCreationModal\r\n          closeModal={closeModal}/>\r\n      )}\r\n\r\n      <MainTemplate>\r\n        <Wrapper>\r\n          <SidebarWrapper>\r\n            <Sidebar>\r\n              <Icon name=\"logo\"/>\r\n            </Sidebar>\r\n          </SidebarWrapper>\r\n\r\n          <ListPanelWrapper>\r\n            <Col gap=\"3rem\">\r\n              <Row justify=\"space-between\">\r\n                <H4>Messages</H4>\r\n                <Text\r\n                  onClick={openModal}\r\n                  clickable secondary>\r\n                  + Create new chat\r\n                </Text>\r\n              </Row>\r\n\r\n              <SearchBar/>\r\n            </Col>\r\n\r\n            <ChatsList/>\r\n          </ListPanelWrapper>\r\n\r\n          <ChatPanelWrapper>\r\n            <DirectChat/>\r\n          </ChatPanelWrapper>\r\n        </Wrapper>\r\n      </MainTemplate>\r\n    </>\r\n  );\r\n};\r\n\r\nconst SearchBar: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const search = useSelector(chatsSelectors.search);\r\n\r\n  const handleChange = ({currentTarget}: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = currentTarget.value;\r\n\r\n    dispatch(chatsActions.setSearching({\r\n      search: value\r\n    }));\r\n\r\n    dispatch(usersActions.fetchSearchingUsers({\r\n      query: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      placeholder=\"Search chat\"\r\n      onChange={handleChange}\r\n      value={search}/>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: ${({theme}) => theme.palette.primary.main};\r\n`;\r\n\r\nconst SidebarWrapper = styled.aside`\r\n  width: 10%;\r\n  padding: 3rem 0 3rem 2rem;\r\n`;\r\n\r\nconst Sidebar = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n  padding: 3rem 0;\r\n`;\r\n\r\nconst ListPanelWrapper = styled(Col).attrs(() => ({\r\n  gap: \"3rem\"\r\n}))`\r\n  width: 30%;\r\n  height: 100%;\r\n  padding: 4rem;\r\n`;\r\n\r\nconst ChatPanelWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 60%;\r\n  height: 100%;\r\n  border-left: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n\r\nconst DirectChat: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const {closeModal, openModal, isModalOpen} = useModal();\r\n\r\n  const {partnerId} = useParams<{partnerId: ID}>();\r\n\r\n  const credentials = useSelector(authSelectors.credentials)!;\r\n  const chat = useSelector(directsSelectors.chat(partnerId))!;\r\n  const messages = useSelector(directsSelectors.messages(partnerId));\r\n  const areMessagesFetching = useSelector(directsSelectors.areMessagesFetching(partnerId));\r\n  const isFetching = useSelector(directsSelectors.isChatFetching(partnerId));\r\n\r\n  if (isFetching) return <H4>Loading...</H4>;\r\n\r\n  if (!chat) return null;\r\n\r\n  return (\r\n    <>\r\n      {isModalOpen && (\r\n        <DirectAttachmentsModal\r\n          closeModal={closeModal}/>\r\n      )}\r\n\r\n      <Col width=\"100%\" height=\"100%\">\r\n        <Header>\r\n          <Row width=\"100%\" height=\"100%\" justify=\"space-between\" align=\"center\">\r\n            <Row height=\"100%\" gap=\"3rem\" align=\"center\">\r\n              <Avatar url={chat.partner.avatar}/>\r\n\r\n              <Col height=\"100%\" justify=\"space-between\" padding=\"1rem 0\">\r\n                <H4>{chat.partner.username}</H4>\r\n                <Text small>Last seen at {formatMessageDate(new Date(chat.partner.lastSeen))}</Text>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row gap=\"3rem\">\r\n              <Icon name=\"attachment\" onClick={openModal} pointer/>\r\n              <Icon name=\"options\" pointer/>\r\n            </Row>\r\n          </Row>\r\n        </Header>\r\n\r\n        <DirectMessagesList\r\n          messages={messages}\r\n          areFetching={areMessagesFetching}/>\r\n\r\n        <ChatForm handleSubmit={\r\n          ({images, files, text, audio}) => {\r\n            const id = nanoid();\r\n\r\n            const date = new Date();\r\n\r\n            dispatch(directsActions.addMessage({\r\n              partnerId,\r\n              isOwn: true,\r\n              message: {\r\n                id, chat, files, text,\r\n                audio: audio && audio.url,\r\n                images: images && images.map(({url}) => url),\r\n                sender: {...credentials, isBanned: chat.isBanned}, isSystem: false,\r\n                isRead: false,\r\n                isEdited: false,\r\n                parent: null,\r\n                createdAt: date.toString()\r\n              }\r\n            }));\r\n\r\n            dispatch(directsActions.fetchSendingMessage({\r\n              text, parent: null,\r\n              images: images && images.map(({id}) => id),\r\n              files: files && files.map(({id}) => id),\r\n              audio: audio && audio.id,\r\n              partner: chat.partner.id\r\n            })).then(unwrapResult)\r\n              .then(({message}) => {\r\n                dispatch(directsActions.updateMessage({\r\n                  partnerId,\r\n                  messageId: id,\r\n                  partial: message\r\n                }));\r\n              });\r\n          }}/>\r\n      </Col>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Header = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  align: \"center\",\r\n  padding: \"3rem 4.5rem\"\r\n}))`\r\n  border-bottom: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n\r\n","import React, {useEffect} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport {nanoid} from \"nanoid\";\r\nimport {unwrapResult} from \"@reduxjs/toolkit\";\r\n\r\nimport {usersActions} from \"@features/users\";\r\nimport {ChatForm, chatsActions, ChatsList, chatsSelectors, useFetchingChats} from \"@features/chats\";\r\nimport {GroupMessagesList, groupsActions, groupsSelectors} from \"@features/groups\";\r\nimport {ID} from \"@lib/typings\";\r\nimport {Col, Row} from \"@lib/layout\";\r\nimport {useRootDispatch} from \"@lib/store\";\r\nimport {H4, Icon, Input, Text} from \"@ui/atoms\";\r\nimport {MainTemplate} from \"@ui/templates\";\r\nimport {Avatar} from \"@ui/molecules\";\r\n\r\nexport const GroupPage = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  useFetchingChats();\r\n\r\n  const {groupId} = useParams<{groupId: ID}>();\r\n\r\n  const chat = useSelector(groupsSelectors.chat(groupId));\r\n  const messages = useSelector(groupsSelectors.messages(groupId));\r\n  const isChatFetching = useSelector(groupsSelectors.isChatFetching(groupId));\r\n  const areMessagesFetching = useSelector(groupsSelectors.areMessagesFetching(groupId));\r\n  const areMessagesFetched = useSelector(groupsSelectors.areMessagesFetched(groupId));\r\n\r\n  const toFetchMessages = !areMessagesFetched || (!messages && !areMessagesFetching);\r\n  const toFetchChat = !chat && !isChatFetching;\r\n\r\n  useEffect(() => {\r\n    if (toFetchChat) {\r\n      dispatch(groupsActions.fetchChat({\r\n        groupId, group: groupId\r\n      }));\r\n    }\r\n\r\n    if (toFetchMessages) {\r\n      dispatch(groupsActions.fetchMessages({\r\n        groupId,\r\n        group: groupId,\r\n        skip: messages ? messages.length : 0\r\n      }));\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <MainTemplate>\r\n      <Wrapper>\r\n        <SidebarWrapper>\r\n          <Sidebar>\r\n            <Icon name=\"logo\"/>\r\n          </Sidebar>\r\n        </SidebarWrapper>\r\n\r\n        <ListPanelWrapper>\r\n          <Col gap=\"3rem\">\r\n            <Row justify=\"space-between\">\r\n              <H4>Messages</H4>\r\n              <Text clickable secondary>+ Create new chat</Text>\r\n            </Row>\r\n\r\n            <SearchBar/>\r\n          </Col>\r\n\r\n          <ChatsList/>\r\n        </ListPanelWrapper>\r\n\r\n        <ChatPanelWrapper>\r\n          <GroupChat/>\r\n        </ChatPanelWrapper>\r\n      </Wrapper>\r\n    </MainTemplate>\r\n  );\r\n};\r\n\r\nconst SearchBar: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const search = useSelector(chatsSelectors.search);\r\n\r\n  const handleChange = ({currentTarget}: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = currentTarget.value;\r\n\r\n    dispatch(chatsActions.setSearching({\r\n      search: value\r\n    }));\r\n\r\n    dispatch(usersActions.fetchSearchingUsers({\r\n      query: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      placeholder=\"Search chat\"\r\n      onChange={handleChange}\r\n      value={search}/>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: ${({theme}) => theme.palette.primary.main};\r\n`;\r\n\r\nconst SidebarWrapper = styled.aside`\r\n  width: 10%;\r\n  padding: 3rem 0 3rem 2rem;\r\n`;\r\n\r\nconst Sidebar = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: ${({theme}) => theme.palette.primary.light};\r\n  border-radius: 1rem;\r\n  padding: 3rem 0;\r\n`;\r\n\r\nconst ListPanelWrapper = styled(Col).attrs(() => ({\r\n  gap: \"3rem\"\r\n}))`\r\n  width: 30%;\r\n  height: 100%;\r\n  padding: 4rem;\r\n`;\r\n\r\nconst ChatPanelWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 60%;\r\n  height: 100%;\r\n  border-left: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n\r\nconst GroupChat: React.FC = () => {\r\n  const dispatch = useRootDispatch();\r\n\r\n  const {groupId} = useParams<{groupId: ID}>();\r\n\r\n  const chat = useSelector(groupsSelectors.chat(groupId));\r\n  const messages = useSelector(groupsSelectors.messages((groupId)));\r\n  const isFetching = useSelector(groupsSelectors.isChatFetching(groupId));\r\n  const areMessagesFetching = useSelector(groupsSelectors.areMessagesFetching((groupId)));\r\n\r\n  if (isFetching) return <H4>Loading...</H4>;\r\n\r\n  if (!chat) return null;\r\n\r\n  return (\r\n    <Col width=\"100%\" height=\"100%\">\r\n      <Header>\r\n        <Row width=\"100%\" height=\"100%\" justify=\"space-between\" align=\"center\">\r\n          <Row height=\"100%\" gap=\"3rem\" align=\"center\">\r\n            <Avatar url={chat.avatar}/>\r\n\r\n            <Col height=\"100%\" justify=\"space-between\" padding=\"1rem 0\">\r\n              <H4>{chat.title}</H4>\r\n              <Text small>{chat.numberOfMembers} members</Text>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row gap=\"3rem\">\r\n            <Icon name=\"loupe\" pointer/>\r\n            <Icon name=\"options\" pointer/>\r\n          </Row>\r\n        </Row>\r\n      </Header>\r\n\r\n      <GroupMessagesList\r\n        messages={messages}\r\n        areFetching={areMessagesFetching} />\r\n\r\n      <ChatForm handleSubmit={({images, files, text, audio}) => {\r\n        const id = nanoid();\r\n\r\n        dispatch(groupsActions.addMessage({\r\n          groupId,\r\n          isOwn: true,\r\n          message: {\r\n            id, chat,\r\n            files, audio: audio && audio.url,\r\n            text, images: images && images.map(({url}) => url),\r\n            sender: chat.member,\r\n            isSystem: false,\r\n            isEdited: false,\r\n            isRead: false,\r\n            parent: null,\r\n            createdAt: new Date().toString()\r\n          }\r\n        }));\r\n\r\n        dispatch(groupsActions.fetchSendingMessage({\r\n            images: images && images.map(({id}) => id),\r\n            files: files && files.map(({id}) => id),\r\n            audio: audio && audio.id, text,\r\n            parent: null, group: chat.id\r\n          }))\r\n          .then(unwrapResult)\r\n          .then(({message}) => {\r\n            dispatch(groupsActions.updateMessage({\r\n              groupId,\r\n              messageId: id,\r\n              partial: message\r\n            }));\r\n          });\r\n      }}/>\r\n    </Col>\r\n  );\r\n};\r\n\r\nconst Header = styled(Row).attrs(() => ({\r\n  width: \"100%\",\r\n  align: \"center\",\r\n  padding: \"3rem 4.5rem\"\r\n}))`\r\n  border-bottom: 2px solid ${({theme}) => theme.palette.divider};\r\n`;\r\n","import React from \"react\";\r\nimport {Switch} from \"react-router-dom\";\r\n\r\nimport {PrivateRoute, PublicOnlyRoute} from \"@lib/routing\";\r\nimport {LoginPage} from \"./login\";\r\nimport {RegisterPage} from \"./register\";\r\nimport {HomePage} from \"./home\";\r\nimport {DirectPage} from \"./direct\";\r\nimport {GroupPage} from \"./group\";\r\n\r\nexport const Routes: React.FC = () => (\r\n    <Switch>\r\n        <PublicOnlyRoute component={LoginPage} path=\"/login\" exact />\r\n        <PublicOnlyRoute component={RegisterPage} path=\"/register\" exact />\r\n        <PrivateRoute component={HomePage} path=\"/\" exact />\r\n        <PrivateRoute component={DirectPage} path=\"/direct/:partnerId\" exact />\r\n        <PrivateRoute component={GroupPage} path=\"/group/:groupId\" exact />\r\n    </Switch>\r\n);","import {createGlobalStyle, css} from \"styled-components\";\r\n\r\nexport const GlobalStyles = createGlobalStyle`\r\n    html {\r\n      font-size: ${({theme}) => theme.typography.htmlFontSize};\r\n      box-sizing: border-box;\r\n    }\r\n    \r\n    *, *::before, *::after {\r\n      box-sizing: inherit;\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n    \r\n    body {\r\n      ${({theme}) => css`\r\n        color: ${theme.palette.text.secondary};\r\n        font-family: ${theme.typography.fontFamily};\r\n        font-size: ${theme.typography.fontSize};\r\n        font-weight: ${theme.typography.fontWeight.regular};\r\n      `}\r\n    }\r\n    \r\n    main {\r\n      display: block;\r\n    }\r\n    \r\n    h1 {\r\n      font-size: 2em;\r\n      margin: 0.67em 0;\r\n    }\r\n    \r\n    hr {\r\n      box-sizing: content-box;\r\n      height: 0;\r\n      overflow: visible;\r\n    }\r\n    \r\n    pre {\r\n      font-family: monospace, monospace;\r\n      font-size: 1em;\r\n    }\r\n    \r\n    a {\r\n      background-color: transparent;\r\n      text-decoration: none;\r\n    }\r\n    \r\n    abbr[title] {\r\n      border-bottom: none;\r\n      text-decoration: underline dotted;\r\n    }\r\n    \r\n    b,\r\n    strong {\r\n      font-weight: bolder;\r\n    }\r\n    \r\n    code,\r\n    kbd,\r\n    samp {\r\n      font-family: monospace, monospace;\r\n      font-size: 1em;\r\n    }\r\n    \r\n    small {\r\n      font-size: 80%;\r\n    }\r\n    \r\n    sub,\r\n    sup {\r\n      font-size: 75%;\r\n      line-height: 0;\r\n      position: relative;\r\n      vertical-align: baseline;\r\n    }\r\n    \r\n    sub {\r\n      bottom: -0.25em;\r\n    }\r\n    \r\n    sup {\r\n      top: -0.5em;\r\n    }\r\n    \r\n    img {\r\n      border-style: none;\r\n    }\r\n    \r\n    button,\r\n    input,\r\n    optgroup,\r\n    select,\r\n    textarea {\r\n      font-family: inherit;\r\n      font-size: 100%;\r\n      line-height: 1.15;\r\n      margin: 0;\r\n    }\r\n    \r\n    button,\r\n    input {\r\n      overflow: visible;\r\n    }\r\n    \r\n    button,\r\n    select {\r\n      text-transform: none;\r\n    }\r\n    \r\n    button,\r\n    [type=\"button\"],\r\n    [type=\"reset\"],\r\n    [type=\"submit\"] {\r\n      -webkit-appearance: button;\r\n    }\r\n    \r\n    button::-moz-focus-inner,\r\n    [type=\"button\"]::-moz-focus-inner,\r\n    [type=\"reset\"]::-moz-focus-inner,\r\n    [type=\"submit\"]::-moz-focus-inner {\r\n      border-style: none;\r\n      padding: 0;\r\n    }\r\n    \r\n    button:-moz-focusring,\r\n    [type=\"button\"]:-moz-focusring,\r\n    [type=\"reset\"]:-moz-focusring,\r\n    [type=\"submit\"]:-moz-focusring {\r\n      outline: 1px dotted ButtonText;\r\n    }\r\n    \r\n    fieldset {\r\n      padding: 0.35em 0.75em 0.625em;\r\n    }\r\n    \r\n    legend {\r\n      box-sizing: border-box;\r\n      color: inherit;\r\n      display: table;\r\n      max-width: 100%;\r\n      padding: 0;\r\n      white-space: normal;\r\n    }\r\n    \r\n    progress {\r\n      vertical-align: baseline;\r\n    }\r\n    \r\n    textarea {\r\n      overflow: auto;\r\n    }\r\n    \r\n    [type=\"checkbox\"],\r\n    [type=\"radio\"] {\r\n      box-sizing: border-box;\r\n      padding: 0;\r\n    }\r\n    \r\n    [type=\"number\"]::-webkit-inner-spin-button,\r\n    [type=\"number\"]::-webkit-outer-spin-button {\r\n      height: auto;\r\n    }\r\n    \r\n    [type=\"search\"] {\r\n      -webkit-appearance: textfield;\r\n      outline-offset: -2px;\r\n    }\r\n    \r\n    [type=\"search\"]::-webkit-search-decoration {\r\n      -webkit-appearance: none;\r\n    }\r\n    \r\n    ::-webkit-file-upload-button {\r\n      -webkit-appearance: button;\r\n      font: inherit;\r\n    }\r\n    \r\n    details {\r\n      display: block;\r\n    }\r\n    \r\n    summary {\r\n      display: list-item;\r\n    }\r\n    \r\n    template {\r\n      display: none;\r\n    }\r\n    \r\n    [hidden] {\r\n      display: none;\r\n    }\r\n    \r\n    ${({theme}) => css`  \r\n      @media only screen and (max-width: ${theme.breakpoints.xl}) {\r\n        html {\r\n          font-size: 62.5%;\r\n        }\r\n      }\r\n      \r\n      @media only screen and (max-width: ${theme.breakpoints.lg}) {\r\n        html {\r\n          font-size: 60%;\r\n        }\r\n      }  \r\n\r\n      @media only screen and (max-width: ${theme.breakpoints.md}) {\r\n        html {\r\n          font-size: 55%;\r\n        }\r\n      }\r\n      \r\n      @media only screen and (max-width: ${theme.breakpoints.sm}) {\r\n        html {\r\n          font-size: 50%;\r\n        }\r\n      }\r\n    \r\n      @media only screen and (max-width: ${theme.breakpoints.xs}) {\r\n        html {\r\n          font-size: 45%;\r\n        }\r\n      }\r\n    `}\r\n`;","import React from \"react\";\r\n\r\nimport {Routes} from \"@pages/routes\";\r\nimport {GlobalStyles} from \"./global-styles\";\r\nimport {CredentialsLoader} from \"@features/auth\";\r\nimport {ChatEventsListeners} from \"@features/chats\";\r\n\r\nexport const App = () => (\r\n  <CredentialsLoader>\r\n    <ChatEventsListeners>\r\n      <Routes/>\r\n      <GlobalStyles/>\r\n    </ChatEventsListeners>\r\n  </CredentialsLoader>\r\n);","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {Provider} from \"react-redux\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\nimport {ThemingProvider} from \"@lib/theming\";\r\nimport {store} from \"@lib/store\";\r\nimport {App} from \"./app\";\r\n\r\nconst root = document.getElementById(\"root\");\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <ThemingProvider>\r\n        <App/>\r\n      </ThemingProvider>\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  root\r\n);"],"sourceRoot":""}